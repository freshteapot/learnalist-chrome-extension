!function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function o(){return Object.create(null)}function s(e){e.forEach(n)}function r(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function a(e){let t;return i(e,e=>t=e)(),t}function c(e,t,n){e.$$.on_destroy.push(i(t,n))}const u=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);function d(e,t){e.appendChild(t)}function m(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function b(e){return document.createTextNode(e)}function g(){return b(" ")}function v(){return b("")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e,t){t=""+t,e.data!==t&&(e.data=t)}function k(e,t){(null!=t||e.value)&&(e.value=t)}function x(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function _(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}let S;function L(e){S=e}function C(){if(!S)throw new Error("Function called outside component initialization");return S}function I(e){C().$$.on_destroy.push(e)}function B(){const e=C();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach(t=>{t.call(e,s)})}}}const D=[],T=[],E=[],N=[],M=Promise.resolve();let O=!1;function j(e){E.push(e)}function A(e){N.push(e)}function R(){const e=new Set;do{for(;D.length;){const e=D.shift();L(e),P(e.$$)}for(;T.length;)T.pop()();for(let t=0;t<E.length;t+=1){const n=E[t];e.has(n)||(n(),e.add(n))}E.length=0}while(D.length);for(;N.length;)N.pop()();O=!1}function P(e){null!==e.fragment&&(e.update(e.dirty),s(e.before_update),e.fragment&&e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(j))}const V=new Set;let G;function K(){G={r:0,c:[],p:G}}function F(){G.r||s(G.c),G=G.p}function J(e,t){e&&e.i&&(V.delete(e),e.i(t))}function z(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),G.c.push(()=>{V.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}function U(e,n){const o=n.token={};function s(e,s,r,l){if(n.token!==o)return;n.resolved=r&&{[r]:l};const i=t(t({},n.ctx),n.resolved),a=e&&(n.current=e)(i);let c=!1;n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==s&&e&&(K(),z(e,1,1,()=>{n.blocks[t]=null}),F())}):n.block.d(1),a.c(),J(a,1),a.m(n.mount(),n.anchor),c=!0),n.block=a,n.blocks&&(n.blocks[s]=a),c&&R()}if((r=e)&&"object"==typeof r&&"function"==typeof r.then){const t=C();if(e.then(e=>{L(t),s(n.then,1,n.value,e),L(null)},e=>{L(t),s(n.catch,2,n.error,e),L(null)}),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var r}function W(e,t){e.d(1),t.delete(e.key)}function q(e,t,n,o,s,r,l,i,a,c,u,d){let m=e.length,f=r.length,p=m;const h={};for(;p--;)h[e[p].key]=p;const b=[],g=new Map,v=new Map;for(p=f;p--;){const e=d(s,r,p),i=n(e);let a=l.get(i);a?o&&a.p(t,e):(a=c(i,e)).c(),g.set(i,b[p]=a),i in h&&v.set(i,Math.abs(p-h[i]))}const y=new Set,w=new Set;function $(e){J(e,1),e.m(i,u),l.set(e.key,e),u=e.first,f--}for(;m&&f;){const t=b[f-1],n=e[m-1],o=t.key,s=n.key;t===n?(u=t.first,m--,f--):g.has(s)?!l.has(o)||y.has(o)?$(t):w.has(s)?m--:v.get(o)>v.get(s)?(w.add(o),$(t)):(y.add(s),m--):(a(n,l),m--)}for(;m--;){const t=e[m];g.has(t.key)||a(t,l)}for(;f;)$(b[f-1]);return b}function H(e,t,n){u(e.$$.props,t)&&(t=e.$$.props[t]||t,e.$$.bound[t]=n,n(e.$$.ctx[t]))}function Y(e){e&&e.c()}function Q(e,t,o){const{fragment:l,on_mount:i,on_destroy:a,after_update:c}=e.$$;l&&l.m(t,o),j(()=>{const t=i.map(n).filter(r);a?a.push(...t):s(t),e.$$.on_mount=[]}),c.forEach(j)}function X(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx={})}function Z(e,t){e.$$.dirty||(D.push(e),O||(O=!0,M.then(R)),e.$$.dirty=o()),e.$$.dirty[t]=!0}function ee(t,n,r,l,i,a){const c=S;L(t);const u=n.props||{},d=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:o(),dirty:null};let m=!1;var f;d.ctx=r?r(t,u,(e,n,o=n)=>(d.ctx&&i(d.ctx[e],d.ctx[e]=o)&&(d.bound[e]&&d.bound[e](o),m&&Z(t,e)),n)):u,d.update(),m=!0,s(d.before_update),d.fragment=!!l&&l(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l((f=n.target,Array.from(f.childNodes))):d.fragment&&d.fragment.c(),n.intro&&J(t.$$.fragment),Q(t,n.target,n.anchor),R()),L(c)}class te{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}const ne=[];function oe(t,n=e){let o;const s=[];function r(e){if(l(t,e)&&(t=e,o)){const e=!ne.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),ne.push(n,t)}if(e){for(let e=0;e<ne.length;e+=2)ne[e][0](ne[e+1]);ne.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(l,i=e){const a=[l,i];return s.push(a),1===s.length&&(o=n(r)||e),l(t),()=>{const e=s.indexOf(a);-1!==e&&s.splice(e,1),0===s.length&&(o(),o=null)}}}}let se="options",re={server:"https://learnalist.net/api",headers:{Authorization:"Basic "},renderScreen:se};function le(){return localStorage.getItem("server")}function ie(){return{"Content-Type":"application/json",Authorization:localStorage.hasOwnProperty("bearerAuth")?"Bearer "+localStorage.getItem("bearerAuth"):localStorage.hasOwnProperty("basicAuth")?"Basic "+localStorage.getItem("basicAuth"):""}}!function(){let e=localStorage.getItem("basicAuth");if(!e)return void(se="options");re.headers.Authorization="Basic "+e;let t=localStorage.getItem("server");t&&(re.server=t);let n=localStorage.getItem("renderScreen");n&&(re.renderScreen=n)}();let ae={GetVersion:async function(){const e=le()+"/version",t=await fetch(e,{headers:ie()}),n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetListsByMe:async function(){const e=le()+"/alist/by/me",t=await fetch(e,{headers:ie()});let n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetLabelsByMe:async function(){const e=le()+"/labels/by/me",t=await fetch(e,{headers:ie()});let n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetListsByLabel:async function(e){const t=le()+"/alist/by/me?labels="+e,n=await fetch(t,{headers:ie()});let o=await n.json();if(n.ok)return o;throw new Error("Boom")},PostList:async function(e){const t=le()+"/alist";let n=e;const o=await fetch(t,{method:"POST",headers:ie(),body:JSON.stringify(n)}),s=await o.json();if(400===o.status||201===o.status)return{status:o.status,body:s};throw new Error("Boom")},PutList:async function(e){const t=le()+"/alist/"+e.uuid;let n=e;const o=await fetch(t,{method:"PUT",headers:ie(),body:JSON.stringify(n)}),s=await o.json();if(400===o.status||200===o.status)return{status:o.status,body:s};throw new Error("Boom")},DeleteList:async function(e){const t=le()+"/alist/"+e.uuid,n=await fetch(t,{method:"DELETE",headers:ie()}),o=await n.json();if(400===n.status||200===n.status||404===n.status)return{status:n.status,body:o};throw new Error("Boom")},DeleteLabel:async function(e){const t=le()+"/labels/"+e,n=await fetch(t,{method:"DELETE",headers:ie()}),o=await n.json();if(400===n.status||200===n.status||404===n.status)return{status:n.status,body:o};throw new Error("Boom")},PostLabel:async function(e){const t=le()+"/labels";let n=e;const o=await fetch(t,{method:"POST",headers:ie(),body:JSON.stringify(n)}),s=await o.json();if(400===o.status||200===o.status||201===o.status)return{status:o.status,body:s};throw new Error("Boom")}};const ce=function(){const{subscribe:e,set:t,update:n}=oe();return{subscribe:e,set:t,create:async function(e,o){let s={data:[],info:{title:e,type:o,labels:[]}};n(e=>s);try{let e=await ae.PostList(s);if(201===e.status){let n=e.body;return t(n),localStorage.setItem("aList",JSON.stringify(n)),e}return e}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to post to the server."}}}},delete:async function(){let e;n(t=>(e=t,t));try{let n=await ae.DeleteList(e);return 200===n.status?(t({}),localStorage.removeItem("aList"),n):n}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to delete from the server."}}}},save:async function(){let e;n(t=>(e=t,t));try{let t=await ae.PutList(e);return 200===t.status?(n(function(e){return t.body}),localStorage.setItem("aList",JSON.stringify(t.body)),"Saved to the server."):t.body.message}catch(e){return console.log(e),"Failed to save to the server."}},setTitle:function(e){n(function(t){return t.info.title=e,t})},removeItem:function(e){n(function(t){return t.data.splice(e,1),t})},addLabel:function(e){n(function(t){return t.info.labels.push(e),t})},removeLabel:function(e){n(function(t){return t.info.labels.splice(e,1),t})},newDataItem:function(e){let t;switch(e){case"v1":t="";break;case"v2":t={from:"",to:""};break;case"v4":t={content:"",url:""};break;default:throw Error("List Type not supported, yet!")}n(function(e){return e.data.push(t),e})}}}();const ue=function(){const{subscribe:e,set:t,update:n}=oe();return{subscribe:e,set:t,delete:async function(){let e;n(t=>(e=t,t));try{let n=await ae.DeleteLabel(e);return 200===n.status?(t(),localStorage.removeItem("label"),n):n}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to delete from the server."}}}},save:async function(e){n(t=>e);try{let t=await ae.PostLabel({label:e});return 200===t.status||201===t.status?(n(function(e){return t.body}),localStorage.setItem("label",e),localStorage.setItem("labels",t.body),{status:t.status,body:{message:"Saved to the server."}}):t}catch(e){return console.log(e),"Failed to save to the server."}}}}(),de=oe(re.renderScreen),me=oe();function fe(){localStorage.setItem("renderScreen",a(de))}function pe(){de.set("version"),fe(),me.set(ae.GetVersion())}function he(){de.set("labels:by:me"),fe(),_e(),me.set(ae.GetLabelsByMe())}function be(){de.set("label:new"),fe()}function ge(e){_e(e);de.set("label:view"),fe(),me.set(ae.GetListsByLabel(e))}function ve(){de.set("lists:by:me"),fe(),me.set(ae.GetListsByMe()),xe({})}function ye(e){xe(e),de.set("alist:view"),fe()}function we(e){ce.set(e),de.set("alist:edit"),fe()}function $e(){de.set("alist:new"),fe()}function ke(){de.set("options"),fe()}function xe(e){e?localStorage.setItem("aList",JSON.stringify(e)):localStorage.removeItem("aList"),ce.set(e)}function _e(e){e?localStorage.setItem("label",e):localStorage.removeItem("label"),ue.set(e)}const Se={showScreenLabelsByMe:he,showScreenLabelNew:be,showScreenLabelView:ge,showScreenListsByMe:ve,showScreenListView:ye,showScreenListEdit:we,showScreenListNew:$e,showScreenOptions:ke,showScreenVersion:pe,loadStart:()=>{let e=localStorage.getItem("aList");e?xe(e=JSON.parse(e)):re.renderScreen.startsWith("alist:")&&(re.renderScreen="lists:by:me");let t=localStorage.getItem("label");t?_e(t):re.renderScreen.startsWith("label:")&&(re.renderScreen="labels:by:me"),"version"===re.renderScreen?pe():"options"===re.renderScreen?ke():"lists:by:me"===re.renderScreen?ve():"alist:view"===re.renderScreen?ye(a(ce)):"alist:edit"===re.renderScreen?we(a(ce)):"alist:new"===re.renderScreen?$e():"labels:by:me"===re.renderScreen?he():"label:view"===re.renderScreen?ge(a(ue)):"label:new"===re.renderScreen?be():ve()}};function Le(t){let n,o,r,l,i,a,c,u,p,b,v,$,k,x,_,S,L;return{c(){n=h("div"),(o=h("button")).textContent="My Lists",r=g(),(l=h("button")).textContent="My Labels",i=g(),(a=h("span")).textContent="/",c=g(),(u=h("button")).textContent="New List",p=g(),(b=h("button")).textContent="New Label",v=g(),($=h("span")).textContent="/",k=g(),(x=h("button")).textContent="Options",_=g(),(S=h("button")).textContent="Version",w(n,"class","svelte-py2icl"),L=[y(o,"click",Se.showScreenListsByMe),y(l,"click",Se.showScreenLabelsByMe),y(u,"click",Se.showScreenListNew),y(b,"click",Se.showScreenLabelNew),y(x,"click",Se.showScreenOptions),y(S,"click",Se.showScreenVersion)]},m(e,t){m(e,n,t),d(n,o),d(n,r),d(n,l),d(n,i),d(n,a),d(n,c),d(n,u),d(n,p),d(n,b),d(n,v),d(n,$),d(n,k),d(n,x),d(n,_),d(n,S)},p:e,i:e,o:e,d(e){e&&f(n),s(L)}}}Se.loadStart();class Ce extends te{constructor(e){super(),ee(this,e,null,Le,l,{})}}function Ie(e){let t,n,o;return{c(){t=h("div"),n=h("h2"),o=b(e.errorMessage),w(n,"class","error svelte-7kos6"),w(t,"class","nicebox")},m(e,s){m(e,t,s),d(t,n),d(n,o)},p(e,t){e.errorMessage&&$(o,t.errorMessage)},d(e){e&&f(t)}}}function Be(t){let n,o,r,l,i,a,c,u,p,b,v,$,_,S,L,C,I,B,D,T=""!==t.errorMessage&&Ie(t);return{c(){T&&T.c(),n=g(),o=h("div"),(r=h("label")).textContent="Server",l=g(),i=h("input"),a=g(),(c=h("label")).textContent="Username",u=g(),p=h("input"),b=g(),(v=h("label")).textContent="Password",$=g(),_=h("input"),S=g(),L=h("div"),(C=h("button")).textContent="Save",I=g(),(B=h("button")).textContent="reset / clear / delete",w(r,"for","f-server"),x(i,"width","100%"),w(i,"type","text"),w(i,"name","f-server"),w(i,"placeholder","https://learnalist.net/api"),w(c,"for","f-username"),x(p,"width","100%"),w(p,"type","text"),w(p,"name","f-username"),w(v,"for","f-password"),x(_,"width","100%"),w(_,"type","password"),w(_,"name","f-password"),w(o,"class","nicebox"),w(L,"class","nicebox"),D=[y(i,"input",t.input0_input_handler),y(p,"input",t.input1_input_handler),y(_,"input",t.input2_input_handler),y(C,"click",t.save),y(B,"click",De)]},m(e,s){T&&T.m(e,s),m(e,n,s),m(e,o,s),d(o,r),d(o,l),d(o,i),k(i,t.options.server),d(o,a),d(o,c),d(o,u),d(o,p),k(p,t.options.username),d(o,b),d(o,v),d(o,$),d(o,_),k(_,t.options.password),m(e,S,s),m(e,L,s),d(L,C),d(L,I),d(L,B)},p(e,t){""!==t.errorMessage?T?T.p(e,t):((T=Ie(t)).c(),T.m(n.parentNode,n)):T&&(T.d(1),T=null),e.options&&i.value!==t.options.server&&k(i,t.options.server),e.options&&p.value!==t.options.username&&k(p,t.options.username),e.options&&_.value!==t.options.password&&k(_,t.options.password)},i:e,o:e,d(e){T&&T.d(e),e&&f(n),e&&f(o),e&&f(S),e&&f(L),s(D)}}}function De(){console.log("reset"),localStorage.setItem("username",""),localStorage.setItem("basicAuth",""),localStorage.removeItem("bearerAuth"),localStorage.removeItem("server")}function Te(e,t,n){let o="",s={server:localStorage.getItem("server")?localStorage.getItem("server"):"",username:localStorage.getItem("username")?localStorage.getItem("username"):"",password:""};return{errorMessage:o,options:s,save:function(){if(n("errorMessage",o=""),""!==s.server&&console.log("Should we ping the /version?"),""===s.username||""===s.password)return n("errorMessage",o="You need to set a username and password"),console.log(o),localStorage.setItem("username",""),localStorage.setItem("basicAuth",""),localStorage.removeItem("bearerAuth"),!1;{let e=btoa(s.username+":"+s.password);localStorage.setItem("username",s.username),localStorage.setItem("basicAuth",e),localStorage.removeItem("bearerAuth")}localStorage.setItem("server",s.server),Se.showScreenListsByMe()},input0_input_handler:function(){s.server=this.value,n("options",s)},input1_input_handler:function(){s.username=this.value,n("options",s)},input2_input_handler:function(){s.password=this.value,n("options",s)}}}class Ee extends te{constructor(e){super(),ee(this,e,Te,Be,l,{})}}function Ne(e){let n,o,s={ctx:e,current:null,token:null,pending:je,then:Oe,catch:Me,value:"data",error:"error"};return U(o=e.$promise,s),{c(){n=v(),s.block.c()},m(e,t){m(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,r){e=r,s.ctx=e,n.$promise&&o!==(o=e.$promise)&&U(o,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&f(n),s.block.d(e),s.token=null,s=null}}}function Me(e){let t,n,o=e.error.message+"";return{c(){t=h("p"),n=b(o),x(t,"color","red")},m(e,o){m(e,t,o),d(t,n)},p(e,t){e.$promise&&o!==(o=t.error.message+"")&&$(n,o)},d(e){e&&f(t)}}}function Oe(e){let t,n,o,s,r,l,i,a,c,u,p,v,y,k,x,_,S,L=e.data.version+"",C=e.data.gitHash+"",I=e.data.gitDate+"";return{c(){t=h("p"),n=b("Version is "),o=b(L),s=g(),r=h("p"),l=b("Git hash is "),i=b(C),a=g(),c=h("p"),u=b("Git date is "),p=b(I),v=g(),y=h("p"),k=b("On "),x=h("a"),_=b("Github"),w(x,"href",S=e.data.url),w(x,"target","_blank")},m(e,f){m(e,t,f),d(t,n),d(t,o),m(e,s,f),m(e,r,f),d(r,l),d(r,i),m(e,a,f),m(e,c,f),d(c,u),d(c,p),m(e,v,f),m(e,y,f),d(y,k),d(y,x),d(x,_)},p(e,t){e.$promise&&L!==(L=t.data.version+"")&&$(o,L),e.$promise&&C!==(C=t.data.gitHash+"")&&$(i,C),e.$promise&&I!==(I=t.data.gitDate+"")&&$(p,I),e.$promise&&S!==(S=t.data.url)&&w(x,"href",S)},d(e){e&&f(t),e&&f(s),e&&f(r),e&&f(a),e&&f(c),e&&f(v),e&&f(y)}}}function je(t){let n;return{c(){(n=h("p")).textContent="...waiting"},m(e,t){m(e,n,t)},p:e,d(e){e&&f(n)}}}function Ae(t){let n,o=t.$promise&&Ne(t);return{c(){n=h("div"),o&&o.c(),w(n,"class","nicebox")},m(e,t){m(e,n,t),o&&o.m(n,null)},p(e,t){t.$promise?o?o.p(e,t):((o=Ne(t)).c(),o.m(n,null)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&f(n),o&&o.d()}}}function Re(e,t,n){let o;return c(e,me,e=>n("$promise",o=e)),{$promise:o}}class Pe extends te{constructor(e){super(),ee(this,e,Re,Ae,l,{})}}function Ve(e,t,n){const o=Object.create(e);return o.label=t[n],o}function Ge(e){let n,o,s={ctx:e,current:null,token:null,pending:ze,then:Fe,catch:Ke,value:"labels",error:"error"};return U(o=e.$promise,s),{c(){n=v(),s.block.c()},m(e,t){m(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,r){e=r,s.ctx=e,n.$promise&&o!==(o=e.$promise)&&U(o,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&f(n),s.block.d(e),s.token=null,s=null}}}function Ke(e){let t,n,o=e.error.message+"";return{c(){t=h("p"),n=b(o),x(t,"color","red")},m(e,o){m(e,t,o),d(t,n)},p(e,t){e.$promise&&o!==(o=t.error.message+"")&&$(n,o)},d(e){e&&f(t)}}}function Fe(e){let t,n=e.labels,o=[];for(let t=0;t<n.length;t+=1)o[t]=Je(Ve(e,n,t));return{c(){t=h("ul");for(let e=0;e<o.length;e+=1)o[e].c()},m(e,n){m(e,t,n);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,s){if(e.onClick||e.$promise){let r;for(n=s.labels,r=0;r<n.length;r+=1){const l=Ve(s,n,r);o[r]?o[r].p(e,l):(o[r]=Je(l),o[r].c(),o[r].m(t,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(e){e&&f(t),p(o,e)}}}function Je(e){let t,n,o,s,r,l=e.label+"";return{c(){t=h("li"),n=h("span"),o=b(l),s=g(),r=y(n,"click",e.onClick(e.label))},m(e,r){m(e,t,r),d(t,n),d(n,o),d(t,s)},p(t,n){e=n,t.$promise&&l!==(l=e.label+"")&&$(o,l)},d(e){e&&f(t),r()}}}function ze(t){let n;return{c(){(n=h("p")).textContent="...waiting"},m(e,t){m(e,n,t)},p:e,d(e){e&&f(n)}}}function Ue(t){let n,o=t.$promise&&Ge(t);return{c(){n=h("div"),o&&o.c(),w(n,"class","nicebox")},m(e,t){m(e,n,t),o&&o.m(n,null)},p(e,t){t.$promise?o?o.p(e,t):((o=Ge(t)).c(),o.m(n,null)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&f(n),o&&o.d()}}}function We(e,t,n){let o;c(e,me,e=>n("$promise",o=e));return{onClick:e=>()=>{Se.showScreenLabelView(e)},$promise:o}}class qe extends te{constructor(e){super(),ee(this,e,We,Ue,l,{})}}function He(e){return 0===Object.entries(e).length&&e.constructor===Object}function Ye(e){let t,n,o,s,r;return{c(){t=h("div"),n=h("span"),o=b("message: "),s=b(e.message),w(t,"title","Click to dismiss."),r=y(t,"click",e.click_handler)},m(e,r){m(e,t,r),d(t,n),d(n,o),d(n,s)},p(e,t){e.message&&$(s,t.message)},d(e){e&&f(t),r()}}}function Qe(t){let n,o,r,l,i,a,c,u,p=t.message&&Ye(t);return{c(){p&&p.c(),n=g(),o=h("div"),(r=h("p")).textContent="Add a label",l=g(),i=h("input"),a=g(),(c=h("button")).textContent="Add",w(i,"type","text"),w(o,"class","nicebox"),u=[y(i,"input",t.input_input_handler),y(c,"click",t.add)]},m(e,s){p&&p.m(e,s),m(e,n,s),m(e,o,s),d(o,r),d(o,l),d(o,i),k(i,t.newLabel),d(o,a),d(o,c)},p(e,t){t.message?p?p.p(e,t):((p=Ye(t)).c(),p.m(n.parentNode,n)):p&&(p.d(1),p=null),e.newLabel&&i.value!==t.newLabel&&k(i,t.newLabel)},i:e,o:e,d(e){p&&p.d(e),e&&f(n),e&&f(o),s(u)}}}function Xe(e,t,n){let o,s="";function r(){n("message",o=null)}return{newLabel:s,message:o,clearMessage:r,add:async function(){if(""===s||s.indexOf(" ")>=0)return n("message",o="The label cannot be empty."),void n("newLabel",s="");let e=await ue.save(s);201===e.status||200===e.status?(n("message",o=e.body.message),Se.showScreenLabelView(s)):n("message",o=e.body.message)},click_handler:()=>r(),input_input_handler:function(){s=this.value,n("newLabel",s)}}}class Ze extends te{constructor(e){super(),ee(this,e,Xe,Qe,l,{})}}function et(e,t,n){const o=Object.create(e);return o.aList=t[n],o}function tt(e){let t,n,o,s,r;return{c(){t=h("div"),n=h("span"),o=b("message: "),s=b(e.message),w(t,"class","nicebox"),w(t,"title","Click to dismiss."),r=y(t,"click",e.click_handler)},m(e,r){m(e,t,r),d(t,n),d(n,o),d(n,s)},p(e,t){e.message&&$(s,t.message)},d(e){e&&f(t),r()}}}function nt(e){let t,n,o,s,r,l=e.$promise&&ot(e);return{c(){t=h("div"),(n=h("button")).textContent="Delete label",o=g(),s=h("div"),l&&l.c(),w(t,"class","nicebox"),w(s,"class","nicebox"),r=y(n,"click",e.deleteLabel)},m(e,r){m(e,t,r),d(t,n),m(e,o,r),m(e,s,r),l&&l.m(s,null)},p(e,t){t.$promise?l?l.p(e,t):((l=ot(t)).c(),l.m(s,null)):l&&(l.d(1),l=null)},d(e){e&&f(t),e&&f(o),e&&f(s),l&&l.d(),r()}}}function ot(e){let n,o,s={ctx:e,current:null,token:null,pending:it,then:rt,catch:st,value:"lists",error:"error"};return U(o=e.$promise,s),{c(){n=v(),s.block.c()},m(e,t){m(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,r){e=r,s.ctx=e,n.$promise&&o!==(o=e.$promise)&&U(o,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&f(n),s.block.d(e),s.token=null,s=null}}}function st(e){let t,n,o=e.error.message+"";return{c(){t=h("p"),n=b(o),x(t,"color","red")},m(e,o){m(e,t,o),d(t,n)},p(e,t){e.$promise&&o!==(o=t.error.message+"")&&$(n,o)},d(e){e&&f(t)}}}function rt(e){let t,n,o,s,r,l,i=[],a=new Map,c=e.lists;const u=e=>e.aList;for(let t=0;t<c.length;t+=1){let n=et(e,c,t),o=u(n);a.set(o,i[t]=lt(o,n))}return{c(){t=h("p"),n=b("Lists with the label "),o=b(e.current),s=b("."),r=g(),l=h("ul");for(let e=0;e<i.length;e+=1)i[e].c()},m(e,a){m(e,t,a),d(t,n),d(t,o),d(t,s),m(e,r,a),m(e,l,a);for(let e=0;e<i.length;e+=1)i[e].m(l,null)},p(e,t){e.current&&$(o,t.current);const n=t.lists;i=q(i,e,u,1,t,n,a,l,W,lt,null,et)},d(e){e&&f(t),e&&f(r),e&&f(l);for(let e=0;e<i.length;e+=1)i[e].d()}}}function lt(e,t){let n,o,s,r,l=t.aList.info.title+"";return{key:e,first:null,c(){n=h("li"),o=h("span"),s=b(l),r=g(),this.first=n},m(e,t){m(e,n,t),d(n,o),d(o,s),d(n,r)},p(e,t){e.$promise&&l!==(l=t.aList.info.title+"")&&$(s,l)},d(e){e&&f(n)}}}function it(e){let t,n,o,s;return{c(){t=h("p"),n=b("Looking for lists with the label "),o=b(e.current),s=b(".")},m(e,r){m(e,t,r),d(t,n),d(t,o),d(t,s)},p(e,t){e.current&&$(o,t.current)},d(e){e&&f(t)}}}function at(t){let n,o,s=t.message&&tt(t),r=!t.hasBeenRemoved&&nt(t);return{c(){s&&s.c(),n=g(),r&&r.c(),o=v()},m(e,t){s&&s.m(e,t),m(e,n,t),r&&r.m(e,t),m(e,o,t)},p(e,t){t.message?s?s.p(e,t):((s=tt(t)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t.hasBeenRemoved?r&&(r.d(1),r=null):r?r.p(e,t):((r=nt(t)).c(),r.m(o.parentNode,o))},i:e,o:e,d(e){s&&s.d(e),e&&f(n),r&&r.d(e),e&&f(o)}}}function ct(e,t,n){let o,s;c(e,me,e=>n("$promise",o=e));let r,l=!1;function i(){n("message",s=null)}I(ue.subscribe(e=>{n("current",r=e)}));return{message:s,hasBeenRemoved:l,current:r,clearMessage:i,deleteLabel:async function(){let e=await ue.delete();404===e.status&&n("hasBeenRemoved",l=!0),200===e.status&&n("hasBeenRemoved",l=!0),n("message",s=e.body.message)},$promise:o,click_handler:()=>i()}}class ut extends te{constructor(e){super(),ee(this,e,ct,at,l,{})}}function dt(e,t,n){const o=Object.create(e);return o.aList=t[n],o}function mt(e){let n,o,s={ctx:e,current:null,token:null,pending:bt,then:pt,catch:ft,value:"lists",error:"error"};return U(o=e.$promise,s),{c(){n=v(),s.block.c()},m(e,t){m(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,r){e=r,s.ctx=e,n.$promise&&o!==(o=e.$promise)&&U(o,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&f(n),s.block.d(e),s.token=null,s=null}}}function ft(e){let t,n,o=e.error.message+"";return{c(){t=h("p"),n=b(o),x(t,"color","red")},m(e,o){m(e,t,o),d(t,n)},p(e,t){e.$promise&&o!==(o=t.error.message+"")&&$(n,o)},d(e){e&&f(t)}}}function pt(e){let t,n=[],o=new Map,s=e.lists;const r=e=>e.aList;for(let t=0;t<s.length;t+=1){let l=dt(e,s,t),i=r(l);o.set(i,n[t]=ht(i,l))}return{c(){t=h("ul");for(let e=0;e<n.length;e+=1)n[e].c()},m(e,o){m(e,t,o);for(let e=0;e<n.length;e+=1)n[e].m(t,null)},p(e,s){const l=s.lists;n=q(n,e,r,1,s,l,o,t,W,ht,null,dt)},d(e){e&&f(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function ht(e,t){let n,o,s,r,l,i,a=t.aList.info.title+"";return{key:e,first:null,c(){n=h("li"),o=h("span"),s=b(a),r=b(" ."),l=g(),i=y(o,"click",t.onClick(t.aList)),this.first=n},m(e,t){m(e,n,t),d(n,o),d(o,s),d(o,r),d(n,l)},p(e,n){t=n,e.$promise&&a!==(a=t.aList.info.title+"")&&$(s,a)},d(e){e&&f(n),i()}}}function bt(t){let n;return{c(){(n=h("p")).textContent="...waiting"},m(e,t){m(e,n,t)},p:e,d(e){e&&f(n)}}}function gt(t){let n,o=t.$promise&&mt(t);return{c(){n=h("div"),o&&o.c(),w(n,"class","nicebox")},m(e,t){m(e,n,t),o&&o.m(n,null)},p(e,t){t.$promise?o?o.p(e,t):((o=mt(t)).c(),o.m(n,null)):o&&(o.d(1),o=null)},i:e,o:e,d(e){e&&f(n),o&&o.d()}}}function vt(e,t,n){let o;c(e,me,e=>n("$promise",o=e));return{onClick:e=>()=>{Se.showScreenListView(e)},$promise:o}}class yt extends te{constructor(e){super(),ee(this,e,vt,gt,l,{})}}function wt(e,t,n){const o=Object.create(e);return o.listType=t[n],o}function $t(e){let t,n,o,s,r;return{c(){t=h("div"),n=h("span"),o=b("message: "),s=b(e.message),w(t,"title","Click to dismiss."),r=y(t,"click",e.click_handler)},m(e,r){m(e,t,r),d(t,n),d(n,o),d(n,s)},p(e,t){e.message&&$(s,t.message)},d(e){e&&f(t),r()}}}function kt(t){let n,o,s,r=t.listType+"";return{c(){n=h("option"),o=b(r),n.__value=s=t.listType,n.value=n.__value},m(e,t){m(e,n,t),d(n,o)},p:e,d(e){e&&f(n)}}}function xt(t){let n,o,r,l,i,a,c,u,b,v,$,x,S,L,C,I,B,D=t.message&&$t(t),T=t.listTypes,E=[];for(let e=0;e<T.length;e+=1)E[e]=kt(wt(t,T,e));return{c(){D&&D.c(),n=g(),o=h("div"),(r=h("span")).textContent="Add",l=g(),i=h("form"),a=h("input"),c=g(),u=h("br"),b=g(),(v=h("span")).textContent="Which list type?",$=g(),x=h("br"),S=g(),L=h("select");for(let e=0;e<E.length;e+=1)E[e].c();var e;C=g(),(I=h("button")).textContent="Submit",w(a,"type","text"),w(a,"placeholder","Title"),void 0===t.selected&&j(()=>t.select_change_handler.call(L)),w(I,"type","submit"),w(o,"class","nicebox"),B=[y(a,"input",t.input_input_handler),y(L,"change",t.select_change_handler),y(i,"submit",(e=t.handleSubmit,function(t){return t.preventDefault(),e.call(this,t)}))]},m(e,s){D&&D.m(e,s),m(e,n,s),m(e,o,s),d(o,r),d(o,l),d(o,i),d(i,a),k(a,t.title),d(i,c),d(i,u),d(i,b),d(i,v),d(i,$),d(i,x),d(i,S),d(i,L);for(let e=0;e<E.length;e+=1)E[e].m(L,null);_(L,t.selected),d(i,C),d(i,I)},p(e,t){if(t.message?D?D.p(e,t):((D=$t(t)).c(),D.m(n.parentNode,n)):D&&(D.d(1),D=null),e.title&&a.value!==t.title&&k(a,t.title),e.listTypes){let n;for(T=t.listTypes,n=0;n<T.length;n+=1){const o=wt(t,T,n);E[n]?E[n].p(e,o):(E[n]=kt(o),E[n].c(),E[n].m(L,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=T.length}e.selected&&_(L,t.selected)},i:e,o:e,d(e){D&&D.d(e),e&&f(n),e&&f(o),p(E,e),s(B)}}}function _t(e,t,n){let o,s,r="",l=["v1","v2","v4"];function i(){n("message",s=null)}return{title:r,listTypes:l,selected:o,message:s,clearMessage:i,handleSubmit:async function(){if(""==r)return void n("message",s="Title cant be empty.");let e=await ce.create(r,o);201===e.status?Se.showScreenListEdit(e.body):n("message",s=e.body.message)},click_handler:()=>i(),input_input_handler:function(){r=this.value,n("title",r)},select_change_handler:function(){o=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n("selected",o),n("listTypes",l)}}}class St extends te{constructor(e){super(),ee(this,e,_t,xt,l,{})}}function Lt(e,t,n){const o=Object.create(e);return o.item=t[n],o.each_value=t,o.i=n,o}function Ct(e){let t,n,o,s,r=e.labels,l=[];for(let t=0;t<r.length;t+=1)l[t]=It(Lt(e,r,t));return{c(){t=h("div"),(n=h("p")).textContent="Labels",o=g(),s=h("ul");for(let e=0;e<l.length;e+=1)l[e].c();w(t,"class","nicebox")},m(e,r){m(e,t,r),d(t,n),d(t,o),d(t,s);for(let e=0;e<l.length;e+=1)l[e].m(s,null)},p(e,t){if(e.remove||e.labels||e.handleKeyDown){let n;for(r=t.labels,n=0;n<r.length;n+=1){const o=Lt(t,r,n);l[n]?l[n].p(e,o):(l[n]=It(o),l[n].c(),l[n].m(s,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(e){e&&f(t),p(l,e)}}}function It(e){let t,n,o,r,l,i;function a(){e.input_input_handler.call(n,e)}function c(...t){return e.click_handler(e,...t)}return{c(){t=h("li"),n=h("input"),o=g(),(r=h("span")).textContent="x",l=g(),w(n,"type","text"),i=[y(n,"input",a),y(n,"keydown",e.handleKeyDown),y(r,"click",c)]},m(s,i){m(s,t,i),d(t,n),k(n,e.item),d(t,o),d(t,r),d(t,l)},p(t,o){e=o,t.labels&&n.value!==e.item&&k(n,e.item)},d(e){e&&f(t),s(i)}}}function Bt(t){let n,o=t.labels&&t.labels.length>0&&Ct(t);return{c(){o&&o.c(),n=v()},m(e,t){o&&o.m(e,t),m(e,n,t)},p(e,t){t.labels&&t.labels.length>0?o?o.p(e,t):((o=Ct(t)).c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(e){o&&o.d(e),e&&f(n)}}}function Dt(e,t,n){const o=B();let{labels:s}=t;function r(e){o("message",{action:"removeLabel",index:e})}return e.$set=(e=>{"labels"in e&&n("labels",s=e.labels)}),{labels:s,remove:r,handleKeyDown:function(e){13===e.keyCode&&o("message",{action:"addLabel",item:""})},input_input_handler:function({item:e,each_value:t,i:o}){t[o]=this.value,n("labels",s)},click_handler:({i:e})=>r(e)}}class Tt extends te{constructor(e){super(),ee(this,e,Dt,Bt,l,{labels:0})}}function Et(t){let n,o;return{c(){w(n=h("input"),"type","text"),o=[y(n,"input",t.input_input_handler),y(n,"onkeypress",t.handleKeyDown)]},m(e,o){m(e,n,o),k(n,t.item)},p(e,t){e.item&&n.value!==t.item&&k(n,t.item)},i:e,o:e,d(e){e&&f(n),s(o)}}}function Nt(e,t,n){const o=B();let{item:s=""}=t;return e.$set=(e=>{"item"in e&&n("item",s=e.item)}),{item:s,handleKeyDown:function(e){13===e.keyCode&&o("message",{action:"newDataItem"})},input_input_handler:function(){s=this.value,n("item",s)}}}class Mt extends te{constructor(e){super(),ee(this,e,Nt,Et,l,{item:0})}}function Ot(t){let n,o,r,l;return{c(){n=h("input"),o=g(),r=h("input"),w(n,"type","text"),w(n,"placeholder","From"),w(r,"type","text"),w(r,"placeholder","To"),l=[y(n,"input",t.input0_input_handler),y(n,"onkeypress",t.handleKeyDown),y(r,"input",t.input1_input_handler),y(r,"onkeypress",t.handleKeyDown)]},m(e,s){m(e,n,s),k(n,t.item.from),m(e,o,s),m(e,r,s),k(r,t.item.to)},p(e,t){e.item&&n.value!==t.item.from&&k(n,t.item.from),e.item&&r.value!==t.item.to&&k(r,t.item.to)},i:e,o:e,d(e){e&&f(n),e&&f(o),e&&f(r),s(l)}}}function jt(e,t,n){const o=B();let{item:s={from:"",to:""}}=t;return e.$set=(e=>{"item"in e&&n("item",s=e.item)}),{item:s,handleKeyDown:function(e){13===e.keyCode&&o("message",{action:"newDataItem"})},input0_input_handler:function(){s.from=this.value,n("item",s)},input1_input_handler:function(){s.to=this.value,n("item",s)}}}class At extends te{constructor(e){super(),ee(this,e,jt,Ot,l,{item:0})}}function Rt(t){let n,o,r,l;return{c(){n=h("textarea"),o=g(),r=h("input"),w(n,"type","text"),w(n,"placeholder","Content"),w(n,"class","svelte-1megcba"),w(r,"type","text"),w(r,"placeholder","Url"),w(r,"class","svelte-1megcba"),l=[y(n,"input",t.textarea_input_handler),y(n,"onkeypress",t.handleKeyDown),y(r,"input",t.input_input_handler),y(r,"onkeypress",t.handleKeyDown)]},m(e,s){m(e,n,s),k(n,t.item.content),m(e,o,s),m(e,r,s),k(r,t.item.url)},p(e,t){e.item&&k(n,t.item.content),e.item&&r.value!==t.item.url&&k(r,t.item.url)},i:e,o:e,d(e){e&&f(n),e&&f(o),e&&f(r),s(l)}}}function Pt(e,t,n){const o=B();let{item:s={content:"",url:""}}=t;return e.$set=(e=>{"item"in e&&n("item",s=e.item)}),{item:s,handleKeyDown:function(e){13===e.keyCode&&o("message",{action:"newDataItem"})},textarea_input_handler:function(){s.content=this.value,n("item",s)},input_input_handler:function(){s.url=this.value,n("item",s)}}}class Vt extends te{constructor(e){super(),ee(this,e,Pt,Rt,l,{item:0})}}function Gt(e,t,n){const o=Object.create(e);return o.item=t[n],o.each_value=t,o.i=n,o}function Kt(e){let t,n,o,s,r,l=e.data,i=[];for(let t=0;t<l.length;t+=1)i[t]=Ft(Gt(e,l,t));const a=e=>z(i[e],1,1,()=>{i[e]=null});return{c(){t=h("div"),(n=h("p")).textContent="Data",o=g(),s=h("ul");for(let e=0;e<i.length;e+=1)i[e].c();w(t,"class","nicebox")},m(e,l){m(e,t,l),d(t,n),d(t,o),d(t,s);for(let e=0;e<i.length;e+=1)i[e].m(s,null);r=!0},p(e,t){if(e.remove||e.renderItem||e.data){let n;for(l=t.data,n=0;n<l.length;n+=1){const o=Gt(t,l,n);i[n]?(i[n].p(e,o),J(i[n],1)):(i[n]=Ft(o),i[n].c(),J(i[n],1),i[n].m(s,null))}for(K(),n=l.length;n<i.length;n+=1)a(n);F()}},i(e){if(!r){for(let e=0;e<l.length;e+=1)J(i[e]);r=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)z(i[e]);r=!1},d(e){e&&f(t),p(i,e)}}}function Ft(e){let t,n,o,s,r,l,i;function a(t){e.switch_instance_item_binding.call(null,t,e)}var c=e.renderItem;function u(e){let t={};return void 0!==e.item&&(t.item=e.item),{props:t}}if(c){var p=new c(u(e));T.push(()=>H(p,"item",a))}function b(...t){return e.click_handler(e,...t)}return{c(){t=h("li"),p&&Y(p.$$.fragment),o=g(),(s=h("span")).textContent="x",r=g(),i=y(s,"click",b)},m(e,n){m(e,t,n),p&&Q(p,t,null),d(t,o),d(t,s),d(t,r),l=!0},p(s,r){e=r;const l={};if(!n&&s.data&&(n=!0,l.item=e.item,A(()=>n=!1)),c!==(c=e.renderItem)){if(p){K();const e=p;z(e.$$.fragment,1,0,()=>{X(e,1)}),F()}c?(p=new c(u(e)),T.push(()=>H(p,"item",a)),Y(p.$$.fragment),J(p.$$.fragment,1),Q(p,t,o)):p=null}else c&&p.$set(l)},i(e){l||(p&&J(p.$$.fragment,e),l=!0)},o(e){p&&z(p.$$.fragment,e),l=!1},d(e){e&&f(t),p&&X(p),i()}}}function Jt(e){let t,n,o=e.data.length>0&&Kt(e);return{c(){o&&o.c(),t=v()},m(e,s){o&&o.m(e,s),m(e,t,s),n=!0},p(e,n){n.data.length>0?o?(o.p(e,n),J(o,1)):((o=Kt(n)).c(),J(o,1),o.m(t.parentNode,t)):o&&(K(),z(o,1,1,()=>{o=null}),F())},i(e){n||(J(o),n=!0)},o(e){z(o),n=!1},d(e){o&&o.d(e),e&&f(t)}}}function zt(e,t,n){const o=B();let{data:s}=t,{listType:r}=t;function l(e){o("message",{action:"removeDataItem",index:e})}let i={v1:Mt,v2:At,v4:Vt}[r];return e.$set=(e=>{"data"in e&&n("data",s=e.data),"listType"in e&&n("listType",r=e.listType)}),{data:s,listType:r,remove:l,renderItem:i,switch_instance_item_binding:function(e,{item:t,each_value:o,i:r}){o[r]=e,n("data",s)},click_handler:({i:e})=>l(e)}}class Ut extends te{constructor(e){super(),ee(this,e,zt,Jt,l,{data:0,listType:0})}}function Wt(e){let t,n,o,s,r;return{c(){t=h("div"),n=h("span"),o=b("message: "),s=b(e.feedback),w(t,"class","nicebox"),w(t,"title","Click to dismiss."),r=y(t,"click",e.dismiss)},m(e,r){m(e,t,r),d(t,n),d(n,o),d(n,s)},p(e,t){e.feedback&&$(s,t.feedback)},d(e){e&&f(t),r()}}}function qt(t){let n,o=t.feedback&&Wt(t);return{c(){o&&o.c(),n=v()},m(e,t){o&&o.m(e,t),m(e,n,t)},p(e,t){t.feedback?o?o.p(e,t):((o=Wt(t)).c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(e){o&&o.d(e),e&&f(n)}}}function Ht(e,t,n){let{feedback:o=null}=t;return e.$set=(e=>{"feedback"in e&&n("feedback",o=e.feedback)}),{feedback:o,dismiss:function(){n("feedback",o=null)}}}class Yt extends te{constructor(e){super(),ee(this,e,Ht,qt,l,{feedback:0})}}function Qt(e){let t,n,o,r,l,i,a,c,u,p,b,v,$,k,x,_,S,L,C,I,B,D;function E(t){e.listeditlabels_labels_binding.call(null,t)}let N={};void 0!==e.labels&&(N.labels=e.labels);const M=new Tt({props:N});function O(t){e.listeditdata_data_binding.call(null,t)}T.push(()=>H(M,"labels",E)),M.$on("message",e.handleMessage);let j={listType:e.listType};void 0!==e.data&&(j.data=e.data);const R=new Ut({props:j});return T.push(()=>H(R,"data",O)),R.$on("message",e.handleMessage),{c(){t=h("div"),(n=h("span")).textContent="Title:",o=g(),r=h("input"),l=g(),i=h("div"),(a=h("button")).textContent="+ item",c=g(),(u=h("button")).textContent="+ label",p=g(),Y(M.$$.fragment),v=g(),Y(R.$$.fragment),k=g(),x=h("div"),(_=h("button")).textContent="save",S=g(),(L=h("button")).textContent="Delete",C=g(),(I=h("button")).textContent="Cancel",w(r,"type","text"),r.value=e.title,w(t,"class","nicebox"),w(i,"class","nicebox"),w(x,"class","nicebox"),D=[y(r,"keyup",Zt),y(a,"click",e.newDataItem),y(u,"click",en),y(_,"click",e.save),y(L,"click",e.deleteList),y(I,"click",e.viewList)]},m(e,s){m(e,t,s),d(t,n),d(t,o),d(t,r),m(e,l,s),m(e,i,s),d(i,a),d(i,c),d(i,u),m(e,p,s),Q(M,e,s),m(e,v,s),Q(R,e,s),m(e,k,s),m(e,x,s),d(x,_),d(x,S),d(x,L),d(x,C),d(x,I),B=!0},p(e,t){B&&!e.title||(r.value=t.title);const n={};!b&&e.labels&&(b=!0,n.labels=t.labels,A(()=>b=!1)),M.$set(n);const o={};e.listType&&(o.listType=t.listType),!$&&e.data&&($=!0,o.data=t.data,A(()=>$=!1)),R.$set(o)},i(e){B||(J(M.$$.fragment,e),J(R.$$.fragment,e),B=!0)},o(e){z(M.$$.fragment,e),z(R.$$.fragment,e),B=!1},d(e){e&&f(t),e&&f(l),e&&f(i),e&&f(p),X(M,e),e&&f(v),X(R,e),e&&f(k),e&&f(x),s(D)}}}function Xt(e){let t,n,o;const s=new Yt({props:{feedback:e.feedback}});let r=!e.hasBeenRemoved&&Qt(e);return{c(){Y(s.$$.fragment),t=g(),r&&r.c(),n=v()},m(e,l){Q(s,e,l),m(e,t,l),r&&r.m(e,l),m(e,n,l),o=!0},p(e,t){const o={};e.feedback&&(o.feedback=t.feedback),s.$set(o),t.hasBeenRemoved?r&&(K(),z(r,1,1,()=>{r=null}),F()):r?(r.p(e,t),J(r,1)):((r=Qt(t)).c(),J(r,1),r.m(n.parentNode,n))},i(e){o||(J(s.$$.fragment,e),J(r),o=!0)},o(e){z(s.$$.fragment,e),z(r),o=!1},d(e){X(s,e),e&&f(t),r&&r.d(e),e&&f(n)}}}function Zt(e){ce.setTitle(e.target.value)}function en(){ce.addLabel("")}function tn(e,t,n){let o,s,r;c(e,ce,e=>n("$aList",o=e));let l,i=[],a=[],u=!1;function d(){ce.newDataItem(o.info.type)}return I(ce.subscribe(e=>{if(He(e))return n("title",r=void 0),n("labels",i=void 0),n("data",a=void 0),n("hasBeenRemoved",u=!0),void n("listType",l=void 0);n("title",r=e.info.title),n("listType",l=e.info.type),n("labels",i=e.info.labels),n("data",a=e.data)})),{feedback:s,title:r,labels:i,data:a,hasBeenRemoved:u,listType:l,viewList:function(){Se.showScreenListView(o)},save:async function(){n("feedback",s=await ce.save())},deleteList:async function(){let e=await ce.delete();404===e.status&&n("hasBeenRemoved",u=!0),200===e.status&&n("hasBeenRemoved",u=!0),n("feedback",s=e.body.message)},newDataItem:d,handleMessage:function(e){var t;"addLabel"===e.detail.action?en():"removeLabel"===e.detail.action?(t=e.detail.index,ce.removeLabel(t)):"newDataItem"===e.detail.action?d():"removeDataItem"===e.detail.action&&function(e){ce.removeItem(e)}(e.detail.index)},listeditlabels_labels_binding:function(e){n("labels",i=e)},listeditdata_data_binding:function(e){n("data",a=e)}}}class nn extends te{constructor(e){super(),ee(this,e,tn,Xt,l,{})}}function on(t){let n,o;return{c(){n=h("span"),o=b(t.item)},m(e,t){m(e,n,t),d(n,o)},p(e,t){e.item&&$(o,t.item)},i:e,o:e,d(e){e&&f(n)}}}function sn(e,t,n){B();let{item:o=""}=t;return e.$set=(e=>{"item"in e&&n("item",o=e.item)}),{item:o}}class rn extends te{constructor(e){super(),ee(this,e,sn,on,l,{item:0})}}function ln(t){let n,o,s,r,l,i=t.item.from+"",a=t.item.to+"";return{c(){n=h("span"),o=b(i),s=g(),r=h("span"),l=b(a)},m(e,t){m(e,n,t),d(n,o),m(e,s,t),m(e,r,t),d(r,l)},p(e,t){e.item&&i!==(i=t.item.from+"")&&$(o,i),e.item&&a!==(a=t.item.to+"")&&$(l,a)},i:e,o:e,d(e){e&&f(n),e&&f(s),e&&f(r)}}}function an(e,t,n){let{item:o={from:"",to:""}}=t;return e.$set=(e=>{"item"in e&&n("item",o=e.item)}),{item:o}}class cn extends te{constructor(e){super(),ee(this,e,an,ln,l,{item:0})}}function un(t){let n,o,s,r,l,i=t.item.content+"",a=t.item.url+"";return{c(){n=h("span"),o=b(i),s=g(),r=h("span"),l=b(a)},m(e,t){m(e,n,t),d(n,o),m(e,s,t),m(e,r,t),d(r,l)},p(e,t){e.item&&i!==(i=t.item.content+"")&&$(o,i),e.item&&a!==(a=t.item.url+"")&&$(l,a)},i:e,o:e,d(e){e&&f(n),e&&f(s),e&&f(r)}}}function dn(e,t,n){let{item:o={content:"",url:""}}=t;return e.$set=(e=>{"item"in e&&n("item",o=e.item)}),{item:o}}class mn extends te{constructor(e){super(),ee(this,e,dn,un,l,{item:0})}}function fn(e,t,n){const o=Object.create(e);return o.item=t[n],o.each_value=t,o.item_index=n,o}function pn(e,t,n){const o=Object.create(e);return o.item=t[n],o}function hn(e){let t,n,o,r,l,i,a,c,u,p,k,x,_,S=e.labels.length>0&&bn(e),L=e.data.length>0&&vn(e);return{c(){t=h("div"),(n=h("button")).textContent="Edit list",o=g(),(r=h("button")).textContent="Delete list",l=g(),i=h("div"),a=h("h1"),c=b(e.title),u=g(),S&&S.c(),p=g(),L&&L.c(),k=v(),w(t,"class","nicebox"),w(i,"class","nicebox"),_=[y(n,"click",e.onClickEditList),y(r,"click",e.onClickDeleteList)]},m(e,s){m(e,t,s),d(t,n),d(t,o),d(t,r),m(e,l,s),m(e,i,s),d(i,a),d(a,c),m(e,u,s),S&&S.m(e,s),m(e,p,s),L&&L.m(e,s),m(e,k,s),x=!0},p(e,t){x&&!e.title||$(c,t.title),t.labels.length>0?S?S.p(e,t):((S=bn(t)).c(),S.m(p.parentNode,p)):S&&(S.d(1),S=null),t.data.length>0?L?(L.p(e,t),J(L,1)):((L=vn(t)).c(),J(L,1),L.m(k.parentNode,k)):L&&(K(),z(L,1,1,()=>{L=null}),F())},i(e){x||(J(L),x=!0)},o(e){z(L),x=!1},d(e){e&&f(t),e&&f(l),e&&f(i),e&&f(u),S&&S.d(e),e&&f(p),L&&L.d(e),e&&f(k),s(_)}}}function bn(e){let t,n,o,s,r=e.labels,l=[];for(let t=0;t<r.length;t+=1)l[t]=gn(pn(e,r,t));return{c(){t=h("div"),(n=h("p")).textContent="Labels",o=g(),s=h("ul");for(let e=0;e<l.length;e+=1)l[e].c();w(t,"class","nicebox")},m(e,r){m(e,t,r),d(t,n),d(t,o),d(t,s);for(let e=0;e<l.length;e+=1)l[e].m(s,null)},p(e,t){if(e.labels){let n;for(r=t.labels,n=0;n<r.length;n+=1){const o=pn(t,r,n);l[n]?l[n].p(e,o):(l[n]=gn(o),l[n].c(),l[n].m(s,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=r.length}},d(e){e&&f(t),p(l,e)}}}function gn(e){let t,n,o,s,r=e.item+"";return{c(){t=h("li"),n=h("span"),o=b(r),s=g()},m(e,r){m(e,t,r),d(t,n),d(n,o),d(t,s)},p(e,t){e.labels&&r!==(r=t.item+"")&&$(o,r)},d(e){e&&f(t)}}}function vn(e){let t,n,o,s,r,l=e.data,i=[];for(let t=0;t<l.length;t+=1)i[t]=yn(fn(e,l,t));const a=e=>z(i[e],1,1,()=>{i[e]=null});return{c(){t=h("div"),(n=h("p")).textContent="Data",o=g(),s=h("ul");for(let e=0;e<i.length;e+=1)i[e].c();w(t,"class","nicebox")},m(e,l){m(e,t,l),d(t,n),d(t,o),d(t,s);for(let e=0;e<i.length;e+=1)i[e].m(s,null);r=!0},p(e,t){if(e.renderItem||e.data){let n;for(l=t.data,n=0;n<l.length;n+=1){const o=fn(t,l,n);i[n]?(i[n].p(e,o),J(i[n],1)):(i[n]=yn(o),i[n].c(),J(i[n],1),i[n].m(s,null))}for(K(),n=l.length;n<i.length;n+=1)a(n);F()}},i(e){if(!r){for(let e=0;e<l.length;e+=1)J(i[e]);r=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)z(i[e]);r=!1},d(e){e&&f(t),p(i,e)}}}function yn(e){let t,n,o,s;function r(t){e.switch_instance_item_binding.call(null,t,e)}var l=e.renderItem;function i(e){let t={};return void 0!==e.item&&(t.item=e.item),{props:t}}if(l){var a=new l(i(e));T.push(()=>H(a,"item",r))}return{c(){t=h("li"),a&&Y(a.$$.fragment),o=g()},m(e,n){m(e,t,n),a&&Q(a,t,null),d(t,o),s=!0},p(s,c){e=c;const u={};if(!n&&s.data&&(n=!0,u.item=e.item,A(()=>n=!1)),l!==(l=e.renderItem)){if(a){K();const e=a;z(e.$$.fragment,1,0,()=>{X(e,1)}),F()}l?(a=new l(i(e)),T.push(()=>H(a,"item",r)),Y(a.$$.fragment),J(a.$$.fragment,1),Q(a,t,o)):a=null}else l&&a.$set(u)},i(e){s||(a&&J(a.$$.fragment,e),s=!0)},o(e){a&&z(a.$$.fragment,e),s=!1},d(e){e&&f(t),a&&X(a)}}}function wn(e){let t,n,o;const s=new Yt({props:{feedback:e.feedback}});let r=!e.hasBeenRemoved&&hn(e);return{c(){Y(s.$$.fragment),t=g(),r&&r.c(),n=v()},m(e,l){Q(s,e,l),m(e,t,l),r&&r.m(e,l),m(e,n,l),o=!0},p(e,t){const o={};e.feedback&&(o.feedback=t.feedback),s.$set(o),t.hasBeenRemoved?r&&(K(),z(r,1,1,()=>{r=null}),F()):r?(r.p(e,t),J(r,1)):((r=hn(t)).c(),J(r,1),r.m(n.parentNode,n))},i(e){o||(J(s.$$.fragment,e),J(r),o=!0)},o(e){z(s.$$.fragment,e),z(r),o=!1},d(e){X(s,e),e&&f(t),r&&r.d(e),e&&f(n)}}}function $n(e,t,n){let o,s,r;c(e,ce,e=>n("$aList",o=e));let l,i=[],a=[],u=!1;I(ce.subscribe(e=>{if(He(e))return n("title",r=void 0),n("labels",i=void 0),n("data",a=void 0),n("hasBeenRemoved",u=!0),void(l=void 0);n("title",r=o.info.title),n("labels",i=o.info.labels),n("data",a=o.data),l=o.info.type}));return{feedback:s,title:r,labels:i,data:a,hasBeenRemoved:u,onClickEditList:()=>{Se.showScreenListEdit(o)},onClickDeleteList:async function(){let e=await ce.delete();404===e.status&&n("hasBeenRemoved",u=!0),200===e.status&&n("hasBeenRemoved",u=!0),n("feedback",s=e.body.message)},renderItem:{v1:rn,v2:cn,v4:mn}[l],switch_instance_item_binding:function(e,{item:t,each_value:o,item_index:s}){o[s]=e,n("data",a)}}}class kn extends te{constructor(e){super(),ee(this,e,$n,wn,l,{})}}function xn(e){let t,n,o,s;const r=new Ce({});var l=e.options[e.$renderScreen];if(l)var i=new l({});return{c(){Y(r.$$.fragment),t=g(),i&&Y(i.$$.fragment),n=g(),(o=h("a")).textContent="login",w(o,"target","_blank"),w(o,"href","http://localhost:1234/login.html")},m(e,l){Q(r,e,l),m(e,t,l),i&&Q(i,e,l),m(e,n,l),m(e,o,l),s=!0},p(e,t){if(l!==(l=t.options[t.$renderScreen])){if(i){K();const e=i;z(e.$$.fragment,1,0,()=>{X(e,1)}),F()}l?(Y((i=new l({})).$$.fragment),J(i.$$.fragment,1),Q(i,n.parentNode,n)):i=null}},i(e){s||(J(r.$$.fragment,e),i&&J(i.$$.fragment,e),s=!0)},o(e){z(r.$$.fragment,e),i&&z(i.$$.fragment,e),s=!1},d(e){X(r,e),e&&f(t),i&&X(i,e),e&&f(n),e&&f(o)}}}function _n(e,t,n){let o;return c(e,de,e=>n("$renderScreen",o=e)),{options:{version:Pe,options:Ee,"labels:by:me":qe,"label:view":ut,"label:new":Ze,"lists:by:me":yt,"alist:new":St,"alist:edit":nn,"alist:view":kn},$renderScreen:o}}new class extends te{constructor(e){super(),ee(this,e,_n,xn,l,{})}}({target:document.body,props:{answer:42}})}();
//# sourceMappingURL=bundle.js.map
