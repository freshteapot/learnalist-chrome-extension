!function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(n)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t,n){const r=t.subscribe(n);e.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}function l(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function p(){return f(" ")}function h(){return f("")}function b(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function g(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t,n){e.style.setProperty(t,n)}function $(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}let w;function k(e){w=e}function x(e){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_destroy.push(e)}function _(){const e=w;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,s)})}}}const S=[],L=Promise.resolve();let C=!1;const N=[],I=[],B=[];function T(e){N.push(e)}function D(e){I.push(e)}function E(e){B.push(e)}function M(){const e=new Set;do{for(;S.length;){const e=S.shift();k(e),O(e.$$)}for(;N.length;)N.shift()();for(;I.length;){const t=I.pop();e.has(t)||(t(),e.add(t))}}while(S.length);for(;B.length;)B.pop()();C=!1}function O(e){e.fragment&&(e.update(e.dirty),s(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(D))}let j;function R(){j={remaining:0,callbacks:[]}}function A(){j.remaining||s(j.callbacks)}function P(e){j.callbacks.push(e)}function V(e,n){const r=n.token={};function s(e,s,o,a){if(n.token!==r)return;n.resolved=o&&{[o]:a};const i=t(t({},n.ctx),n.resolved),l=e&&(n.current=e)(i);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==s&&e&&(R(),P(()=>{e.d(1),n.blocks[t]=null}),e.o(1),A())}):n.block.d(1),l.c(),l.i&&l.i(1),l.m(n.mount(),n.anchor),M()),n.block=l,n.blocks&&(n.blocks[s]=l)}if((o=e)&&"function"==typeof o.then){if(e.then(e=>{s(n.then,1,n.value,e)},e=>{s(n.catch,2,n.error,e)}),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var o}function G(e,t){e.d(1),t.delete(e.key)}function K(e,t,n,r,s,o,a,i,l,c,u,d){let m=e.length,f=o.length,p=m;const h={};for(;p--;)h[e[p].key]=p;const b=[],v=new Map,g=new Map;for(p=f;p--;){const e=d(s,o,p),i=n(e);let l=a.get(i);l?r&&l.p(t,e):(l=c(i,e)).c(),v.set(i,b[p]=l),i in h&&g.set(i,Math.abs(p-h[i]))}const y=new Set,$=new Set;function w(e){e.i&&e.i(1),e.m(i,u),a.set(e.key,e),u=e.first,f--}for(;m&&f;){const t=b[f-1],n=e[m-1],r=t.key,s=n.key;t===n?(u=t.first,m--,f--):v.has(s)?!a.has(r)||y.has(r)?w(t):$.has(s)?m--:g.get(r)>g.get(s)?($.add(r),w(t)):(y.add(s),m--):(l(n,a),m--)}for(;m--;){const t=e[m];v.has(t.key)||l(t,a)}for(;f;)w(b[f-1]);return b}function F(e){let t;return e.subscribe(e=>t=e)(),t}function J(e,t,n){-1!==e.$$.props.indexOf(t)&&(e.$$.bound[t]=n,n(e.$$.ctx[t]))}function z(e,t,r){const{fragment:a,on_mount:i,on_destroy:l,after_render:c}=e.$$;a.m(t,r),D(()=>{const t=i.map(n).filter(o);l?l.push(...t):s(t),e.$$.on_mount=[]}),c.forEach(D)}function U(e,t){e.$$.dirty||(S.push(e),C||(C=!0,L.then(M)),e.$$.dirty=r()),e.$$.dirty[t]=!0}function W(t,n,o,a,i,l){const c=w;k(t);const u=n.props||{},d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(c?c.$$.context:[]),callbacks:r(),dirty:null};let m=!1;var f;d.ctx=o?o(t,u,(e,n)=>{d.ctx&&i(d.ctx[e],d.ctx[e]=n)&&(d.bound[e]&&d.bound[e](n),m&&U(t,e))}):u,d.update(),m=!0,s(d.before_render),d.fragment=a(d.ctx),n.target&&(n.hydrate?d.fragment.l((f=n.target,Array.from(f.childNodes))):d.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),z(t,n.target,n.anchor),M()),k(c)}class q{$destroy(){var t,n;n=!0,(t=this).$$&&(s(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function H(t,n=e){let r;const s=[];function o(e){if(a(t,e)){if(t=e,!r)return;s.forEach(e=>e[1]()),s.forEach(e=>e[0](t))}}return{set:o,update:function(e){o(e(t))},subscribe:function(a,i=e){const l=[a,i];return s.push(l),1===s.length&&(r=n(o)||e),a(t),()=>{const e=s.indexOf(l);-1!==e&&s.splice(e,1),0===s.length&&r()}}}}let Y="options",Q={server:"https://learnalist.net/api",headers:{Authorization:"Basic "},renderScreen:Y};function X(){return localStorage.getItem("server")}function Z(){return{"Content-Type":"application/json",Authorization:"Basic "+localStorage.getItem("basicAuth")}}!function(){let e=localStorage.getItem("basicAuth");if(!e)return void(Y="options");Q.headers.Authorization="Basic "+e;let t=localStorage.getItem("server");t&&(Q.server=t);let n=localStorage.getItem("renderScreen");n&&(Q.renderScreen=n)}();let ee={GetVersion:async function(){const e=X()+"/version",t=await fetch(e,{headers:Z()}),n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetListsByMe:async function(){const e=X()+"/alist/by/me",t=await fetch(e,{headers:Z()});let n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetLabelsByMe:async function(){const e=X()+"/labels/by/me",t=await fetch(e,{headers:Z()});let n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetListsByLabel:async function(e){const t=X()+"/alist/by/me?labels="+e,n=await fetch(t,{headers:Z()});let r=await n.json();if(n.ok)return r;throw new Error("Boom")},PostList:async function(e){const t=X()+"/alist";let n=e;const r=await fetch(t,{method:"POST",headers:Z(),body:JSON.stringify(n)}),s=await r.json();if(400===r.status||201===r.status)return{status:r.status,body:s};throw new Error("Boom")},PutList:async function(e){const t=X()+"/alist/"+e.uuid;let n=e;const r=await fetch(t,{method:"PUT",headers:Z(),body:JSON.stringify(n)}),s=await r.json();if(400===r.status||200===r.status)return{status:r.status,body:s};throw new Error("Boom")},DeleteList:async function(e){const t=X()+"/alist/"+e.uuid,n=await fetch(t,{method:"DELETE",headers:Z()}),r=await n.json();if(400===n.status||200===n.status||404===n.status)return{status:n.status,body:r};throw new Error("Boom")},DeleteLabel:async function(e){const t=X()+"/labels/"+e,n=await fetch(t,{method:"DELETE",headers:Z()}),r=await n.json();if(400===n.status||200===n.status||404===n.status)return{status:n.status,body:r};throw new Error("Boom")},PostLabel:async function(e){const t=X()+"/labels";let n=e;const r=await fetch(t,{method:"POST",headers:Z(),body:JSON.stringify(n)}),s=await r.json();if(400===r.status||200===r.status||201===r.status)return{status:r.status,body:s};throw new Error("Boom")}};const te=function(){const{subscribe:e,set:t,update:n}=H();return{subscribe:e,set:t,create:async function(e,r){let s={data:[],info:{title:e,type:r,labels:[]}};n(e=>s);try{let e=await ee.PostList(s);if(201===e.status){let n=e.body;return t(n),localStorage.setItem("aList",JSON.stringify(n)),e}return e}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to post to the server."}}}},delete:async function(){let e;n(t=>(e=t,t));try{let n=await ee.DeleteList(e);return 200===n.status?(t({}),localStorage.removeItem("aList"),n):n}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to delete from the server."}}}},save:async function(){let e;n(t=>(e=t,t));try{let t=await ee.PutList(e);return 200===t.status?(n(function(e){return t.body}),localStorage.setItem("aList",JSON.stringify(t.body)),"Saved to the server."):t.body.message}catch(e){return console.log(e),"Failed to save to the server."}},setTitle:function(e){n(function(t){return t.info.title=e,t})},removeItem:function(e){n(function(t){return t.data.splice(e,1),t})},addLabel:function(e){n(function(t){return t.info.labels.push(e),t})},removeLabel:function(e){n(function(t){return t.info.labels.splice(e,1),t})},newDataItem:function(e){let t;switch(e){case"v1":t="";break;case"v2":t={from:"",to:""};break;case"v4":t={content:"",url:""};break;default:throw Error("List Type not supported, yet!")}n(function(e){return e.data.push(t),e})}}}();const ne=function(){const{subscribe:e,set:t,update:n}=H();return{subscribe:e,set:t,delete:async function(){let e;n(t=>(e=t,t));try{let n=await ee.DeleteLabel(e);return 200===n.status?(t(),localStorage.removeItem("label"),n):n}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to delete from the server."}}}},save:async function(e){n(t=>e);try{let t=await ee.PostLabel({label:e});return 200===t.status||201===t.status?(n(function(e){return t.body}),localStorage.setItem("label",e),localStorage.setItem("labels",t.body),{status:t.status,body:{message:"Saved to the server."}}):t}catch(e){return console.log(e),"Failed to save to the server."}}}}(),re=H(Q.renderScreen),se=H();function oe(){localStorage.setItem("renderScreen",F(re))}function ae(){re.set("version"),oe(),se.set(ee.GetVersion())}function ie(){re.set("labels:by:me"),oe(),be(),se.set(ee.GetLabelsByMe())}function le(){re.set("label:new"),oe()}function ce(e){be(e);re.set("label:view"),oe(),se.set(ee.GetListsByLabel(e))}function ue(){re.set("lists:by:me"),oe(),se.set(ee.GetListsByMe()),he({})}function de(e){he(e),re.set("alist:view"),oe()}function me(e){te.set(e),re.set("alist:edit"),oe()}function fe(){re.set("alist:new"),oe()}function pe(){re.set("options"),oe()}function he(e){e?localStorage.setItem("aList",JSON.stringify(e)):localStorage.removeItem("aList"),te.set(e)}function be(e){e?localStorage.setItem("label",e):localStorage.removeItem("label"),ne.set(e)}const ve={showScreenLabelsByMe:ie,showScreenLabelNew:le,showScreenLabelView:ce,showScreenListsByMe:ue,showScreenListView:de,showScreenListEdit:me,showScreenListNew:fe,showScreenOptions:pe,showScreenVersion:ae,loadStart:()=>{let e=localStorage.getItem("aList");e?he(e=JSON.parse(e)):Q.renderScreen.startsWith("alist:")&&(Q.renderScreen="lists:by:me");let t=localStorage.getItem("label");t?be(t):Q.renderScreen.startsWith("label:")&&(Q.renderScreen="labels:by:me"),"version"===Q.renderScreen?ae():"options"===Q.renderScreen?pe():"lists:by:me"===Q.renderScreen?ue():"alist:view"===Q.renderScreen?de(F(te)):"alist:edit"===Q.renderScreen?me(F(te)):"alist:new"===Q.renderScreen?fe():"labels:by:me"===Q.renderScreen?ie():"label:view"===Q.renderScreen?ce(F(ne)):"label:new"===Q.renderScreen?le():ue()}};function ge(t){var n,r,o,a,i,d,f,h,v,g,y,$,w,k,x,_,S;return{c(){n=m("div"),(r=m("button")).textContent="My Lists",o=p(),(a=m("button")).textContent="My Labels",i=p(),(d=m("span")).textContent="/",f=p(),(h=m("button")).textContent="New List",v=p(),(g=m("button")).textContent="New Label",y=p(),($=m("span")).textContent="/",w=p(),(k=m("button")).textContent="Options",x=p(),(_=m("button")).textContent="Version",n.className="svelte-py2icl",S=[b(r,"click",ve.showScreenListsByMe),b(a,"click",ve.showScreenLabelsByMe),b(h,"click",ve.showScreenListNew),b(g,"click",ve.showScreenLabelNew),b(k,"click",ve.showScreenOptions),b(_,"click",ve.showScreenVersion)]},m(e,t){c(e,n,t),l(n,r),l(n,o),l(n,a),l(n,i),l(n,d),l(n,f),l(n,h),l(n,v),l(n,g),l(n,y),l(n,$),l(n,w),l(n,k),l(n,x),l(n,_)},p:e,i:e,o:e,d(e){e&&u(n),s(S)}}}ve.loadStart();class ye extends q{constructor(e){super(),W(this,e,null,ge,a,[])}}function $e(e){var t,n,r;return{c(){t=m("div"),n=m("h2"),r=f(e.errorMessage),n.className="error svelte-7kos6",t.className="nicebox"},m(e,s){c(e,t,s),l(t,n),l(n,r)},p(e,t){e.errorMessage&&g(r,t.errorMessage)},d(e){e&&u(t)}}}function we(t){var n,r,o,a,i,d,f,h,g,$,w,k,x,_,S,L,C,N,I,B=""!==t.errorMessage&&$e(t);return{c(){B&&B.c(),n=p(),r=m("div"),(o=m("label")).textContent="Server",a=p(),i=m("input"),d=p(),(f=m("label")).textContent="Username",h=p(),g=m("input"),$=p(),(w=m("label")).textContent="Password",k=p(),x=m("input"),_=p(),S=m("div"),(L=m("button")).textContent="Save",C=p(),(N=m("button")).textContent="reset / clear / delete",o.htmlFor="f-server",y(i,"width","100%"),v(i,"type","text"),i.name="f-server",i.placeholder="https://learnalist.net/api",f.htmlFor="f-username",y(g,"width","100%"),v(g,"type","text"),g.name="f-username",w.htmlFor="f-password",y(x,"width","100%"),v(x,"type","password"),x.name="f-password",r.className="nicebox",S.className="nicebox",I=[b(i,"input",t.input0_input_handler),b(g,"input",t.input1_input_handler),b(x,"input",t.input2_input_handler),b(L,"click",t.save),b(N,"click",ke)]},m(e,s){B&&B.m(e,s),c(e,n,s),c(e,r,s),l(r,o),l(r,a),l(r,i),i.value=t.options.server,l(r,d),l(r,f),l(r,h),l(r,g),g.value=t.options.username,l(r,$),l(r,w),l(r,k),l(r,x),x.value=t.options.password,c(e,_,s),c(e,S,s),l(S,L),l(S,C),l(S,N)},p(e,t){""!==t.errorMessage?B?B.p(e,t):((B=$e(t)).c(),B.m(n.parentNode,n)):B&&(B.d(1),B=null),e.options&&i.value!==t.options.server&&(i.value=t.options.server),e.options&&g.value!==t.options.username&&(g.value=t.options.username),e.options&&(x.value=t.options.password)},i:e,o:e,d(e){B&&B.d(e),e&&(u(n),u(r),u(_),u(S)),s(I)}}}function ke(){console.log("reset")}function xe(e,t,n){let r="",s={server:localStorage.getItem("server")?localStorage.getItem("server"):"",username:localStorage.getItem("username")?localStorage.getItem("username"):"",password:""};return{errorMessage:r,options:s,save:function(){if(n("errorMessage",r=""),""!==s.server&&console.log("Should we ping the /version?"),""===s.username||""===s.password)return n("errorMessage",r="You need to set a username and password"),console.log(r),localStorage.setItem("username",""),localStorage.setItem("basicAuth",""),!1;{let e=btoa(s.username+":"+s.password);localStorage.setItem("username",s.username),localStorage.setItem("basicAuth",e)}localStorage.setItem("server",s.server),ve.showScreenListsByMe()},input0_input_handler:function(){s.server=this.value,n("options",s)},input1_input_handler:function(){s.username=this.value,n("options",s)},input2_input_handler:function(){s.password=this.value,n("options",s)}}}class _e extends q{constructor(e){super(),W(this,e,xe,we,a,[])}}function Se(e){var n,r;let s={ctx:e,current:null,pending:Ne,then:Ce,catch:Le,value:"data",error:"error"};return V(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&V(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function Le(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),l(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function Ce(e){var t,n,r,s,o,a,i,d,h,b,v,y,$,w,k,x,_,S=e.data.version,L=e.data.gitHash,C=e.data.gitDate;return{c(){t=m("p"),n=f("Version is "),r=f(S),s=p(),o=m("p"),a=f("Git hash is "),i=f(L),d=p(),h=m("p"),b=f("Git date is "),v=f(C),y=p(),$=m("p"),w=f("On "),k=m("a"),x=f("Github"),k.href=_=e.data.url,k.target="_blank"},m(e,u){c(e,t,u),l(t,n),l(t,r),c(e,s,u),c(e,o,u),l(o,a),l(o,i),c(e,d,u),c(e,h,u),l(h,b),l(h,v),c(e,y,u),c(e,$,u),l($,w),l($,k),l(k,x)},p(e,t){e.$promise&&S!==(S=t.data.version)&&g(r,S),e.$promise&&L!==(L=t.data.gitHash)&&g(i,L),e.$promise&&C!==(C=t.data.gitDate)&&g(v,C),e.$promise&&_!==(_=t.data.url)&&(k.href=_)},d(e){e&&(u(t),u(s),u(o),u(d),u(h),u(y),u($))}}}function Ne(t){var n;return{c(){(n=m("p")).textContent="...waiting"},m(e,t){c(e,n,t)},p:e,d(e){e&&u(n)}}}function Ie(t){var n,r=t.$promise&&Se(t);return{c(){n=m("div"),r&&r.c(),n.className="nicebox"},m(e,t){c(e,n,t),r&&r.m(n,null)},p(e,t){t.$promise?r?r.p(e,t):((r=Se(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&u(n),r&&r.d()}}}function Be(e,t,n){let r;return i(e,se,e=>{n("$promise",r=e)}),{$promise:r}}class Te extends q{constructor(e){super(),W(this,e,Be,Ie,a,[])}}function De(e,t,n){const r=Object.create(e);return r.label=t[n],r}function Ee(e){var n,r;let s={ctx:e,current:null,pending:Re,then:Oe,catch:Me,value:"labels",error:"error"};return V(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&V(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function Me(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),l(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function Oe(e){for(var t,n=e.labels,r=[],s=0;s<n.length;s+=1)r[s]=je(De(e,n,s));return{c(){t=m("ul");for(var e=0;e<r.length;e+=1)r[e].c()},m(e,n){c(e,t,n);for(var s=0;s<r.length;s+=1)r[s].m(t,null)},p(e,s){if(e.onClick||e.$promise){n=s.labels;for(var o=0;o<n.length;o+=1){const a=De(s,n,o);r[o]?r[o].p(e,a):(r[o]=je(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&u(t),d(r,e)}}}function je(e){var t,n,r,s,o,a=e.label;return{c(){t=m("li"),n=m("span"),r=f(a),s=p(),o=b(n,"click",e.onClick(e.label))},m(e,o){c(e,t,o),l(t,n),l(n,r),l(t,s)},p(t,n){e=n,t.$promise&&a!==(a=e.label)&&g(r,a)},d(e){e&&u(t),o()}}}function Re(t){var n;return{c(){(n=m("p")).textContent="...waiting"},m(e,t){c(e,n,t)},p:e,d(e){e&&u(n)}}}function Ae(t){var n,r=t.$promise&&Ee(t);return{c(){n=m("div"),r&&r.c(),n.className="nicebox"},m(e,t){c(e,n,t),r&&r.m(n,null)},p(e,t){t.$promise?r?r.p(e,t):((r=Ee(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&u(n),r&&r.d()}}}function Pe(e,t,n){let r;i(e,se,e=>{n("$promise",r=e)});return{onClick:e=>()=>{ve.showScreenLabelView(e)},$promise:r}}class Ve extends q{constructor(e){super(),W(this,e,Pe,Ae,a,[])}}function Ge(e){return 0===Object.entries(e).length&&e.constructor===Object}function Ke(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.message),t.title="Click to dismiss.",o=b(t,"click",e.click_handler)},m(e,o){c(e,t,o),l(t,n),l(n,r),l(n,s)},p(e,t){e.message&&g(s,t.message)},d(e){e&&u(t),o()}}}function Fe(t){var n,r,o,a,i,d,f,h,g=t.message&&Ke(t);return{c(){g&&g.c(),n=p(),r=m("div"),(o=m("p")).textContent="Add a label",a=p(),i=m("input"),d=p(),(f=m("button")).textContent="Add",v(i,"type","text"),r.className="nicebox",h=[b(i,"input",t.input_input_handler),b(f,"click",t.add)]},m(e,s){g&&g.m(e,s),c(e,n,s),c(e,r,s),l(r,o),l(r,a),l(r,i),i.value=t.newLabel,l(r,d),l(r,f)},p(e,t){t.message?g?g.p(e,t):((g=Ke(t)).c(),g.m(n.parentNode,n)):g&&(g.d(1),g=null),e.newLabel&&i.value!==t.newLabel&&(i.value=t.newLabel)},i:e,o:e,d(e){g&&g.d(e),e&&(u(n),u(r)),s(h)}}}function Je(e,t,n){let r,s="";function o(){n("message",r=null)}return{newLabel:s,message:r,clearMessage:o,add:async function(){if(""===s||s.indexOf(" ")>=0)return n("message",r="The label cannot be empty."),void n("newLabel",s="");let e=await ne.save(s);201===e.status||200===e.status?(n("message",r=e.body.message),ve.showScreenLabelView(s)):n("message",r=e.body.message)},click_handler:function(){return o()},input_input_handler:function(){s=this.value,n("newLabel",s)}}}class ze extends q{constructor(e){super(),W(this,e,Je,Fe,a,[])}}function Ue(e,t,n){const r=Object.create(e);return r.aList=t[n],r}function We(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.message),t.className="nicebox",t.title="Click to dismiss.",o=b(t,"click",e.click_handler)},m(e,o){c(e,t,o),l(t,n),l(n,r),l(n,s)},p(e,t){e.message&&g(s,t.message)},d(e){e&&u(t),o()}}}function qe(e){var t,n,r,s,o,a=e.$promise&&He(e);return{c(){t=m("div"),(n=m("button")).textContent="Delete label",r=p(),s=m("div"),a&&a.c(),t.className="nicebox",s.className="nicebox",o=b(n,"click",e.deleteLabel)},m(e,o){c(e,t,o),l(t,n),c(e,r,o),c(e,s,o),a&&a.m(s,null)},p(e,t){t.$promise?a?a.p(e,t):((a=He(t)).c(),a.m(s,null)):a&&(a.d(1),a=null)},d(e){e&&(u(t),u(r),u(s)),a&&a.d(),o()}}}function He(e){var n,r;let s={ctx:e,current:null,pending:Ze,then:Qe,catch:Ye,value:"lists",error:"error"};return V(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&V(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function Ye(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),l(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function Qe(e){var t,n,r,s,o,a,i=[],d=new Map,h=e.lists;const b=e=>e.aList;for(var v=0;v<h.length;v+=1){let t=Ue(e,h,v),n=b(t);d.set(n,i[v]=Xe(n,t))}return{c(){for(t=m("p"),n=f("Lists with the label "),r=f(e.current),s=f("."),o=p(),a=m("ul"),v=0;v<i.length;v+=1)i[v].c()},m(e,u){for(c(e,t,u),l(t,n),l(t,r),l(t,s),c(e,o,u),c(e,a,u),v=0;v<i.length;v+=1)i[v].m(a,null)},p(e,t){e.current&&g(r,t.current);const n=t.lists;i=K(i,e,b,1,t,n,d,a,G,Xe,null,Ue)},d(e){for(e&&(u(t),u(o),u(a)),v=0;v<i.length;v+=1)i[v].d()}}}function Xe(e,t){var n,r,s,o,a=t.aList.info.title;return{key:e,first:null,c(){n=m("li"),r=m("span"),s=f(a),o=p(),this.first=n},m(e,t){c(e,n,t),l(n,r),l(r,s),l(n,o)},p(e,t){e.$promise&&a!==(a=t.aList.info.title)&&g(s,a)},d(e){e&&u(n)}}}function Ze(e){var t,n,r,s;return{c(){t=m("p"),n=f("Looking for lists with the label "),r=f(e.current),s=f(".")},m(e,o){c(e,t,o),l(t,n),l(t,r),l(t,s)},p(e,t){e.current&&g(r,t.current)},d(e){e&&u(t)}}}function et(t){var n,r,s=t.message&&We(t),o=!t.hasBeenRemoved&&qe(t);return{c(){s&&s.c(),n=p(),o&&o.c(),r=h()},m(e,t){s&&s.m(e,t),c(e,n,t),o&&o.m(e,t),c(e,r,t)},p(e,t){t.message?s?s.p(e,t):((s=We(t)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t.hasBeenRemoved?o&&(o.d(1),o=null):o?o.p(e,t):((o=qe(t)).c(),o.m(r.parentNode,r))},i:e,o:e,d(e){s&&s.d(e),e&&u(n),o&&o.d(e),e&&u(r)}}}function tt(e,t,n){let r,s;i(e,se,e=>{n("$promise",r=e)});let o,a=!1;function l(){n("message",s=null)}return x(ne.subscribe(e=>{n("current",o=e)})),{message:s,hasBeenRemoved:a,current:o,clearMessage:l,deleteLabel:async function(){let e=await ne.delete();404===e.status&&n("hasBeenRemoved",a=!0),200===e.status&&n("hasBeenRemoved",a=!0),n("message",s=e.body.message)},$promise:r,click_handler:function(){return l()}}}class nt extends q{constructor(e){super(),W(this,e,tt,et,a,[])}}function rt(e,t,n){const r=Object.create(e);return r.aList=t[n],r}function st(e){var n,r;let s={ctx:e,current:null,pending:lt,then:at,catch:ot,value:"lists",error:"error"};return V(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&V(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function ot(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),l(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function at(e){var t,n=[],r=new Map,s=e.lists;const o=e=>e.aList;for(var a=0;a<s.length;a+=1){let t=rt(e,s,a),i=o(t);r.set(i,n[a]=it(i,t))}return{c(){for(t=m("ul"),a=0;a<n.length;a+=1)n[a].c()},m(e,r){for(c(e,t,r),a=0;a<n.length;a+=1)n[a].m(t,null)},p(e,s){const a=s.lists;n=K(n,e,o,1,s,a,r,t,G,it,null,rt)},d(e){for(e&&u(t),a=0;a<n.length;a+=1)n[a].d()}}}function it(e,t){var n,r,s,o,a,i,d=t.aList.info.title;return{key:e,first:null,c(){n=m("li"),r=m("span"),s=f(d),o=f(" ."),a=p(),i=b(r,"click",t.onClick(t.aList)),this.first=n},m(e,t){c(e,n,t),l(n,r),l(r,s),l(r,o),l(n,a)},p(e,n){t=n,e.$promise&&d!==(d=t.aList.info.title)&&g(s,d)},d(e){e&&u(n),i()}}}function lt(t){var n;return{c(){(n=m("p")).textContent="...waiting"},m(e,t){c(e,n,t)},p:e,d(e){e&&u(n)}}}function ct(t){var n,r=t.$promise&&st(t);return{c(){n=m("div"),r&&r.c(),n.className="nicebox"},m(e,t){c(e,n,t),r&&r.m(n,null)},p(e,t){t.$promise?r?r.p(e,t):((r=st(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&u(n),r&&r.d()}}}function ut(e,t,n){let r;i(e,se,e=>{n("$promise",r=e)});return{onClick:e=>()=>{ve.showScreenListView(e)},$promise:r}}class dt extends q{constructor(e){super(),W(this,e,ut,ct,a,[])}}function mt(e,t,n){const r=Object.create(e);return r.listType=t[n],r}function ft(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.message),t.title="Click to dismiss.",o=b(t,"click",e.click_handler)},m(e,o){c(e,t,o),l(t,n),l(n,r),l(n,s)},p(e,t){e.message&&g(s,t.message)},d(e){e&&u(t),o()}}}function pt(e){var t,n,r=e.listType;return{c(){t=m("option"),n=f(r),t.__value=e.listType,t.value=t.__value},m(e,r){c(e,t,r),l(t,n)},p(e,n){t.value=t.__value},d(e){e&&u(t)}}}function ht(t){for(var n,r,o,a,i,f,h,g,y,w,k,x,_,S,L,C,N,I=t.message&&ft(t),B=t.listTypes,T=[],E=0;E<B.length;E+=1)T[E]=pt(mt(t,B,E));return{c(){I&&I.c(),n=p(),r=m("div"),(o=m("span")).textContent="Add",a=p(),i=m("form"),f=m("input"),h=p(),g=m("br"),y=p(),(w=m("span")).textContent="Which list type?",k=p(),x=m("br"),_=p(),S=m("select");for(var e=0;e<T.length;e+=1)T[e].c();var s;L=p(),(C=m("button")).textContent="Submit",v(f,"type","text"),f.placeholder="Title",void 0===t.selected&&D(()=>t.select_change_handler.call(S)),C.type="submit",r.className="nicebox",N=[b(f,"input",t.input_input_handler),b(S,"change",t.select_change_handler),b(i,"submit",(s=t.handleSubmit,function(e){return e.preventDefault(),s.call(this,e)}))]},m(e,s){I&&I.m(e,s),c(e,n,s),c(e,r,s),l(r,o),l(r,a),l(r,i),l(i,f),f.value=t.title,l(i,h),l(i,g),l(i,y),l(i,w),l(i,k),l(i,x),l(i,_),l(i,S);for(var u=0;u<T.length;u+=1)T[u].m(S,null);$(S,t.selected),l(i,L),l(i,C)},p(e,t){if(t.message?I?I.p(e,t):((I=ft(t)).c(),I.m(n.parentNode,n)):I&&(I.d(1),I=null),e.title&&f.value!==t.title&&(f.value=t.title),e.listTypes){B=t.listTypes;for(var r=0;r<B.length;r+=1){const n=mt(t,B,r);T[r]?T[r].p(e,n):(T[r]=pt(n),T[r].c(),T[r].m(S,null))}for(;r<T.length;r+=1)T[r].d(1);T.length=B.length}e.selected&&$(S,t.selected)},i:e,o:e,d(e){I&&I.d(e),e&&(u(n),u(r)),d(T,e),s(N)}}}function bt(e,t,n){let r,s,o="",a=["v1","v2","v4"];function i(){n("message",s=null)}return{title:o,listTypes:a,selected:r,message:s,clearMessage:i,handleSubmit:async function(){if(""==o)return void n("message",s="Title cant be empty.");let e=await te.create(o,r);201===e.status?ve.showScreenListEdit(e.body):n("message",s=e.body.message)},click_handler:function(){return i()},input_input_handler:function(){o=this.value,n("title",o)},select_change_handler:function(){r=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n("selected",r),n("listTypes",a)}}}class vt extends q{constructor(e){super(),W(this,e,bt,ht,a,[])}}function gt(e,t,n){const r=Object.create(e);return r.item=t[n],r.each_value=t,r.i=n,r}function yt(e){for(var t,n,r,s,o=e.labels,a=[],i=0;i<o.length;i+=1)a[i]=$t(gt(e,o,i));return{c(){t=m("div"),(n=m("p")).textContent="Labels",r=p(),s=m("ul");for(var e=0;e<a.length;e+=1)a[e].c();t.className="nicebox"},m(e,o){c(e,t,o),l(t,n),l(t,r),l(t,s);for(var i=0;i<a.length;i+=1)a[i].m(s,null)},p(e,t){if(e.labels||e.handleKeyDown){o=t.labels;for(var n=0;n<o.length;n+=1){const r=gt(t,o,n);a[n]?a[n].p(e,r):(a[n]=$t(r),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},d(e){e&&u(t),d(a,e)}}}function $t(e){var t,n,r,o,a,i;function d(){e.input_input_handler.call(n,e)}function f(){return e.click_handler(e)}return{c(){t=m("li"),n=m("input"),r=p(),(o=m("span")).textContent="x",a=p(),v(n,"type","text"),i=[b(n,"input",d),b(n,"keydown",e.handleKeyDown),b(o,"click",f)]},m(s,i){c(s,t,i),l(t,n),n.value=e.item,l(t,r),l(t,o),l(t,a)},p(t,r){e=r,t.labels&&n.value!==e.item&&(n.value=e.item)},d(e){e&&u(t),s(i)}}}function wt(t){var n,r=t.labels&&t.labels.length>0&&yt(t);return{c(){r&&r.c(),n=h()},m(e,t){r&&r.m(e,t),c(e,n,t)},p(e,t){t.labels&&t.labels.length>0?r?r.p(e,t):((r=yt(t)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&u(n)}}}function kt(e,t,n){const r=_();let{labels:s}=t;function o(e){r("message",{action:"removeLabel",index:e})}return e.$set=(e=>{"labels"in e&&n("labels",s=e.labels)}),{labels:s,remove:o,handleKeyDown:function(e){13===e.keyCode&&r("message",{action:"addLabel",item:""})},input_input_handler:function({item:e,each_value:t,i:r}){t[r]=this.value,n("labels",s)},click_handler:function({i:e}){return o(e)}}}class xt extends q{constructor(e){super(),W(this,e,kt,wt,a,["labels"])}}function _t(t){var n,r;return{c(){v(n=m("input"),"type","text"),r=[b(n,"input",t.input_input_handler),b(n,"onkeypress",t.handleKeyDown)]},m(e,r){c(e,n,r),n.value=t.item},p(e,t){e.item&&n.value!==t.item&&(n.value=t.item)},i:e,o:e,d(e){e&&u(n),s(r)}}}function St(e,t,n){const r=_();let{item:s=""}=t;return e.$set=(e=>{"item"in e&&n("item",s=e.item)}),{item:s,handleKeyDown:function(e){13===e.keyCode&&r("message",{action:"newDataItem"})},input_input_handler:function(){s=this.value,n("item",s)}}}class Lt extends q{constructor(e){super(),W(this,e,St,_t,a,["item"])}}function Ct(t){var n,r,o,a;return{c(){n=m("input"),r=p(),o=m("input"),v(n,"type","text"),n.placeholder="From",v(o,"type","text"),o.placeholder="To",a=[b(n,"input",t.input0_input_handler),b(n,"onkeypress",t.handleKeyDown),b(o,"input",t.input1_input_handler),b(o,"onkeypress",t.handleKeyDown)]},m(e,s){c(e,n,s),n.value=t.item.from,c(e,r,s),c(e,o,s),o.value=t.item.to},p(e,t){e.item&&n.value!==t.item.from&&(n.value=t.item.from),e.item&&o.value!==t.item.to&&(o.value=t.item.to)},i:e,o:e,d(e){e&&(u(n),u(r),u(o)),s(a)}}}function Nt(e,t,n){const r=_();let{item:s={from:"",to:""}}=t;return e.$set=(e=>{"item"in e&&n("item",s=e.item)}),{item:s,handleKeyDown:function(e){13===e.keyCode&&r("message",{action:"newDataItem"})},input0_input_handler:function(){s.from=this.value,n("item",s)},input1_input_handler:function(){s.to=this.value,n("item",s)}}}class It extends q{constructor(e){super(),W(this,e,Nt,Ct,a,["item"])}}function Bt(t){var n,r,o,a;return{c(){n=m("textarea"),r=p(),o=m("input"),v(n,"type","text"),n.placeholder="Content",n.className="svelte-1megcba",v(o,"type","text"),o.placeholder="Url",o.className="svelte-1megcba",a=[b(n,"input",t.textarea_input_handler),b(n,"onkeypress",t.handleKeyDown),b(o,"input",t.input_input_handler),b(o,"onkeypress",t.handleKeyDown)]},m(e,s){c(e,n,s),n.value=t.item.content,c(e,r,s),c(e,o,s),o.value=t.item.url},p(e,t){e.item&&(n.value=t.item.content),e.item&&o.value!==t.item.url&&(o.value=t.item.url)},i:e,o:e,d(e){e&&(u(n),u(r),u(o)),s(a)}}}function Tt(e,t,n){const r=_();let{item:s={content:"",url:""}}=t;return e.$set=(e=>{"item"in e&&n("item",s=e.item)}),{item:s,handleKeyDown:function(e){13===e.keyCode&&r("message",{action:"newDataItem"})},textarea_input_handler:function(){s.content=this.value,n("item",s)},input_input_handler:function(){s.url=this.value,n("item",s)}}}class Dt extends q{constructor(e){super(),W(this,e,Tt,Bt,a,["item"])}}function Et(e,t,n){const r=Object.create(e);return r.item=t[n],r.each_value=t,r.i=n,r}function Mt(e){for(var t,n,r,s,o,a=e.data,i=[],f=0;f<a.length;f+=1)i[f]=Ot(Et(e,a,f));function h(e,t,n){i[e]&&(t&&P(()=>{i[e].d(t),i[e]=null}),i[e].o(n))}return{c(){t=m("div"),(n=m("p")).textContent="Data",r=p(),s=m("ul");for(var e=0;e<i.length;e+=1)i[e].c();t.className="nicebox"},m(e,a){c(e,t,a),l(t,n),l(t,r),l(t,s);for(var u=0;u<i.length;u+=1)i[u].m(s,null);o=!0},p(e,t){if(e.renderItem||e.data){a=t.data;for(var n=0;n<a.length;n+=1){const r=Et(t,a,n);i[n]?(i[n].p(e,r),i[n].i(1)):(i[n]=Ot(r),i[n].c(),i[n].i(1),i[n].m(s,null))}for(R();n<i.length;n+=1)h(n,1,1);A()}},i(e){if(!o){for(var t=0;t<a.length;t+=1)i[t].i();o=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)h(e,0);o=!1},d(e){e&&u(t),d(i,e)}}}function Ot(e){var t,n,r,s,o,a,i;function d(t){e.switch_instance_item_binding.call(null,t,e),n=!0,E(()=>n=!1)}var f=e.renderItem;function h(e){let t={};return void 0!==e.item&&(t.item=e.item),{props:t}}if(f){var v=new f(h(e));T(()=>J(v,"item",d))}function g(){return e.click_handler(e)}return{c(){t=m("li"),v&&v.$$.fragment.c(),r=p(),(s=m("span")).textContent="x",o=p(),i=b(s,"click",g)},m(e,n){c(e,t,n),v&&z(v,t,null),l(t,r),l(t,s),l(t,o),a=!0},p(s,o){e=o;var a={};if(!n&&s.data&&(a.item=e.item),f!==(f=e.renderItem)){if(v){R();const e=v;P(()=>{e.$destroy()}),e.$$.fragment.o(1),A()}f?(v=new f(h(e)),T(()=>J(v,"item",d)),v.$$.fragment.c(),v.$$.fragment.i(1),z(v,t,r)):v=null}else f&&v.$set(a)},i(e){a||(v&&v.$$.fragment.i(e),a=!0)},o(e){v&&v.$$.fragment.o(e),a=!1},d(e){e&&u(t),v&&v.$destroy(),i()}}}function jt(e){var t,n,r=e.data.length>0&&Mt(e);return{c(){r&&r.c(),t=h()},m(e,s){r&&r.m(e,s),c(e,t,s),n=!0},p(e,n){n.data.length>0?r?(r.p(e,n),r.i(1)):((r=Mt(n)).c(),r.i(1),r.m(t.parentNode,t)):r&&(R(),P(()=>{r.d(1),r=null}),r.o(1),A())},i(e){n||(r&&r.i(),n=!0)},o(e){r&&r.o(),n=!1},d(e){r&&r.d(e),e&&u(t)}}}function Rt(e,t,n){const r=_();let{data:s,listType:o}=t;function a(e){r("message",{action:"removeDataItem",index:e})}let i={v1:Lt,v2:It,v4:Dt}[o];return e.$set=(e=>{"data"in e&&n("data",s=e.data),"listType"in e&&n("listType",o=e.listType)}),{data:s,listType:o,remove:a,renderItem:i,switch_instance_item_binding:function(e,{item:t,each_value:r,i:o}){r[o]=e,n("data",s)},click_handler:function({i:e}){return a(e)}}}class At extends q{constructor(e){super(),W(this,e,Rt,jt,a,["data","listType"])}}function Pt(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.feedback),t.className="nicebox",t.title="Click to dismiss.",o=b(t,"click",e.dismiss)},m(e,o){c(e,t,o),l(t,n),l(n,r),l(n,s)},p(e,t){e.feedback&&g(s,t.feedback)},d(e){e&&u(t),o()}}}function Vt(t){var n,r=t.feedback&&Pt(t);return{c(){r&&r.c(),n=h()},m(e,t){r&&r.m(e,t),c(e,n,t)},p(e,t){t.feedback?r?r.p(e,t):((r=Pt(t)).c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&u(n)}}}function Gt(e,t,n){let{feedback:r=null}=t;return e.$set=(e=>{"feedback"in e&&n("feedback",r=e.feedback)}),{feedback:r,dismiss:function(){n("feedback",r=null)}}}class Kt extends q{constructor(e){super(),W(this,e,Gt,Vt,a,["feedback"])}}function Ft(e){var t,n,r,o,a,i,d,f,h,g,y,$,w,k,x,_,S,L,C,N,I,B;function D(t){e.listeditlabels_labels_binding.call(null,t),y=!0,E(()=>y=!1)}let M={};void 0!==e.labels&&(M.labels=e.labels);var O=new xt({props:M});function j(t){e.listeditdata_data_binding.call(null,t),w=!0,E(()=>w=!1)}T(()=>J(O,"labels",D)),O.$on("message",e.handleMessage);let R={listType:e.listType};void 0!==e.data&&(R.data=e.data);var A=new At({props:R});return T(()=>J(A,"data",j)),A.$on("message",e.handleMessage),{c(){t=m("div"),(n=m("span")).textContent="Title:",r=p(),o=m("input"),a=p(),i=m("div"),(d=m("button")).textContent="+ item",f=p(),(h=m("button")).textContent="+ label",g=p(),O.$$.fragment.c(),$=p(),A.$$.fragment.c(),k=p(),x=m("div"),(_=m("button")).textContent="save",S=p(),(L=m("button")).textContent="Delete",C=p(),(N=m("button")).textContent="Cancel",v(o,"type","text"),o.value=e.title,t.className="nicebox",i.className="nicebox",x.className="nicebox",B=[b(o,"keyup",zt),b(d,"click",e.newDataItem),b(h,"click",Ut),b(_,"click",e.save),b(L,"click",e.deleteList),b(N,"click",e.viewList)]},m(e,s){c(e,t,s),l(t,n),l(t,r),l(t,o),c(e,a,s),c(e,i,s),l(i,d),l(i,f),l(i,h),c(e,g,s),z(O,e,s),c(e,$,s),z(A,e,s),c(e,k,s),c(e,x,s),l(x,_),l(x,S),l(x,L),l(x,C),l(x,N),I=!0},p(e,t){I&&!e.title||(o.value=t.title);var n={};!y&&e.labels&&(n.labels=t.labels),O.$set(n);var r={};e.listType&&(r.listType=t.listType),!w&&e.data&&(r.data=t.data),A.$set(r)},i(e){I||(O.$$.fragment.i(e),A.$$.fragment.i(e),I=!0)},o(e){O.$$.fragment.o(e),A.$$.fragment.o(e),I=!1},d(e){e&&(u(t),u(a),u(i),u(g)),O.$destroy(e),e&&u($),A.$destroy(e),e&&(u(k),u(x)),s(B)}}}function Jt(e){var t,n,r,s=new Kt({props:{feedback:e.feedback}}),o=!e.hasBeenRemoved&&Ft(e);return{c(){s.$$.fragment.c(),t=p(),o&&o.c(),n=h()},m(e,a){z(s,e,a),c(e,t,a),o&&o.m(e,a),c(e,n,a),r=!0},p(e,t){var r={};e.feedback&&(r.feedback=t.feedback),s.$set(r),t.hasBeenRemoved?o&&(R(),P(()=>{o.d(1),o=null}),o.o(1),A()):o?(o.p(e,t),o.i(1)):((o=Ft(t)).c(),o.i(1),o.m(n.parentNode,n))},i(e){r||(s.$$.fragment.i(e),o&&o.i(),r=!0)},o(e){s.$$.fragment.o(e),o&&o.o(),r=!1},d(e){s.$destroy(e),e&&u(t),o&&o.d(e),e&&u(n)}}}function zt(e){te.setTitle(e.target.value)}function Ut(){te.addLabel("")}function Wt(e,t,n){let r,s,o;i(e,te,e=>{n("$aList",r=e)});let a,l=[],c=[],u=!1;function d(){te.newDataItem(r.info.type)}return x(te.subscribe(e=>{if(Ge(e))return n("title",o=void 0),n("labels",l=void 0),n("data",c=void 0),n("hasBeenRemoved",u=!0),void n("listType",a=void 0);n("title",o=e.info.title),n("listType",a=e.info.type),n("labels",l=e.info.labels),n("data",c=e.data)})),{feedback:s,title:o,labels:l,data:c,hasBeenRemoved:u,listType:a,viewList:function(){ve.showScreenListView(r)},save:async function(){n("feedback",s=await te.save())},deleteList:async function(){let e=await te.delete();404===e.status&&n("hasBeenRemoved",u=!0),200===e.status&&n("hasBeenRemoved",u=!0),n("feedback",s=e.body.message)},newDataItem:d,handleMessage:function(e){var t;"addLabel"===e.detail.action?Ut():"removeLabel"===e.detail.action?(t=e.detail.index,te.removeLabel(t)):"newDataItem"===e.detail.action?d():"removeDataItem"===e.detail.action&&function(e){te.removeItem(e)}(e.detail.index)},listeditlabels_labels_binding:function(e){n("labels",l=e)},listeditdata_data_binding:function(e){n("data",c=e)}}}class qt extends q{constructor(e){super(),W(this,e,Wt,Jt,a,[])}}function Ht(t){var n,r;return{c(){n=m("span"),r=f(t.item)},m(e,t){c(e,n,t),l(n,r)},p(e,t){e.item&&g(r,t.item)},i:e,o:e,d(e){e&&u(n)}}}function Yt(e,t,n){let{item:r=""}=t;return e.$set=(e=>{"item"in e&&n("item",r=e.item)}),{item:r}}class Qt extends q{constructor(e){super(),W(this,e,Yt,Ht,a,["item"])}}function Xt(t){var n,r,s,o,a,i=t.item.from,d=t.item.to;return{c(){n=m("span"),r=f(i),s=p(),o=m("span"),a=f(d)},m(e,t){c(e,n,t),l(n,r),c(e,s,t),c(e,o,t),l(o,a)},p(e,t){e.item&&i!==(i=t.item.from)&&g(r,i),e.item&&d!==(d=t.item.to)&&g(a,d)},i:e,o:e,d(e){e&&(u(n),u(s),u(o))}}}function Zt(e,t,n){let{item:r={from:"",to:""}}=t;return e.$set=(e=>{"item"in e&&n("item",r=e.item)}),{item:r}}class en extends q{constructor(e){super(),W(this,e,Zt,Xt,a,["item"])}}function tn(t){var n,r,s,o,a,i=t.item.content,d=t.item.url;return{c(){n=m("span"),r=f(i),s=p(),o=m("span"),a=f(d)},m(e,t){c(e,n,t),l(n,r),c(e,s,t),c(e,o,t),l(o,a)},p(e,t){e.item&&i!==(i=t.item.content)&&g(r,i),e.item&&d!==(d=t.item.url)&&g(a,d)},i:e,o:e,d(e){e&&(u(n),u(s),u(o))}}}function nn(e,t,n){let{item:r={content:"",url:""}}=t;return e.$set=(e=>{"item"in e&&n("item",r=e.item)}),{item:r}}class rn extends q{constructor(e){super(),W(this,e,nn,tn,a,["item"])}}function sn(e,t,n){const r=Object.create(e);return r.item=t[n],r.each_value=t,r.item_index=n,r}function on(e,t,n){const r=Object.create(e);return r.item=t[n],r}function an(e){var t,n,r,o,a,i,d,v,y,$,w,k,x,_=e.labels.length>0&&ln(e),S=e.data.length>0&&un(e);return{c(){t=m("div"),(n=m("button")).textContent="Edit list",r=p(),(o=m("button")).textContent="Delete list",a=p(),i=m("div"),d=m("h1"),v=f(e.title),y=p(),_&&_.c(),$=p(),S&&S.c(),w=h(),t.className="nicebox",i.className="nicebox",x=[b(n,"click",e.onClickEditList),b(o,"click",e.onClickDeleteList)]},m(e,s){c(e,t,s),l(t,n),l(t,r),l(t,o),c(e,a,s),c(e,i,s),l(i,d),l(d,v),c(e,y,s),_&&_.m(e,s),c(e,$,s),S&&S.m(e,s),c(e,w,s),k=!0},p(e,t){k&&!e.title||g(v,t.title),t.labels.length>0?_?_.p(e,t):((_=ln(t)).c(),_.m($.parentNode,$)):_&&(_.d(1),_=null),t.data.length>0?S?(S.p(e,t),S.i(1)):((S=un(t)).c(),S.i(1),S.m(w.parentNode,w)):S&&(R(),P(()=>{S.d(1),S=null}),S.o(1),A())},i(e){k||(S&&S.i(),k=!0)},o(e){S&&S.o(),k=!1},d(e){e&&(u(t),u(a),u(i),u(y)),_&&_.d(e),e&&u($),S&&S.d(e),e&&u(w),s(x)}}}function ln(e){for(var t,n,r,s,o=e.labels,a=[],i=0;i<o.length;i+=1)a[i]=cn(on(e,o,i));return{c(){t=m("div"),(n=m("p")).textContent="Labels",r=p(),s=m("ul");for(var e=0;e<a.length;e+=1)a[e].c();t.className="nicebox"},m(e,o){c(e,t,o),l(t,n),l(t,r),l(t,s);for(var i=0;i<a.length;i+=1)a[i].m(s,null)},p(e,t){if(e.labels){o=t.labels;for(var n=0;n<o.length;n+=1){const r=on(t,o,n);a[n]?a[n].p(e,r):(a[n]=cn(r),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},d(e){e&&u(t),d(a,e)}}}function cn(e){var t,n,r,s=e.item;return{c(){t=m("li"),n=m("span"),r=f(s)},m(e,s){c(e,t,s),l(t,n),l(n,r)},p(e,t){e.labels&&s!==(s=t.item)&&g(r,s)},d(e){e&&u(t)}}}function un(e){for(var t,n,r,s,o,a=e.data,i=[],f=0;f<a.length;f+=1)i[f]=dn(sn(e,a,f));function h(e,t,n){i[e]&&(t&&P(()=>{i[e].d(t),i[e]=null}),i[e].o(n))}return{c(){t=m("div"),(n=m("p")).textContent="Data",r=p(),s=m("ul");for(var e=0;e<i.length;e+=1)i[e].c();t.className="nicebox"},m(e,a){c(e,t,a),l(t,n),l(t,r),l(t,s);for(var u=0;u<i.length;u+=1)i[u].m(s,null);o=!0},p(e,t){if(e.renderItem||e.data){a=t.data;for(var n=0;n<a.length;n+=1){const r=sn(t,a,n);i[n]?(i[n].p(e,r),i[n].i(1)):(i[n]=dn(r),i[n].c(),i[n].i(1),i[n].m(s,null))}for(R();n<i.length;n+=1)h(n,1,1);A()}},i(e){if(!o){for(var t=0;t<a.length;t+=1)i[t].i();o=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)h(e,0);o=!1},d(e){e&&u(t),d(i,e)}}}function dn(e){var t,n,r,s;function o(t){e.switch_instance_item_binding.call(null,t,e),n=!0,E(()=>n=!1)}var a=e.renderItem;function i(e){let t={};return void 0!==e.item&&(t.item=e.item),{props:t}}if(a){var d=new a(i(e));T(()=>J(d,"item",o))}return{c(){t=m("li"),d&&d.$$.fragment.c(),r=p()},m(e,n){c(e,t,n),d&&z(d,t,null),l(t,r),s=!0},p(s,l){e=l;var c={};if(!n&&s.data&&(c.item=e.item),a!==(a=e.renderItem)){if(d){R();const e=d;P(()=>{e.$destroy()}),e.$$.fragment.o(1),A()}a?(d=new a(i(e)),T(()=>J(d,"item",o)),d.$$.fragment.c(),d.$$.fragment.i(1),z(d,t,r)):d=null}else a&&d.$set(c)},i(e){s||(d&&d.$$.fragment.i(e),s=!0)},o(e){d&&d.$$.fragment.o(e),s=!1},d(e){e&&u(t),d&&d.$destroy()}}}function mn(e){var t,n,r,s=new Kt({props:{feedback:e.feedback}}),o=!e.hasBeenRemoved&&an(e);return{c(){s.$$.fragment.c(),t=p(),o&&o.c(),n=h()},m(e,a){z(s,e,a),c(e,t,a),o&&o.m(e,a),c(e,n,a),r=!0},p(e,t){var r={};e.feedback&&(r.feedback=t.feedback),s.$set(r),t.hasBeenRemoved?o&&(R(),P(()=>{o.d(1),o=null}),o.o(1),A()):o?(o.p(e,t),o.i(1)):((o=an(t)).c(),o.i(1),o.m(n.parentNode,n))},i(e){r||(s.$$.fragment.i(e),o&&o.i(),r=!0)},o(e){s.$$.fragment.o(e),o&&o.o(),r=!1},d(e){s.$destroy(e),e&&u(t),o&&o.d(e),e&&u(n)}}}function fn(e,t,n){let r,s,o;i(e,te,e=>{n("$aList",r=e)});let a,l=[],c=[],u=!1;x(te.subscribe(e=>{if(Ge(e))return n("title",o=void 0),n("labels",l=void 0),n("data",c=void 0),n("hasBeenRemoved",u=!0),void n("listType",a=void 0);n("title",o=r.info.title),n("labels",l=r.info.labels),n("data",c=r.data),n("listType",a=r.info.type)}));return{feedback:s,title:o,labels:l,data:c,hasBeenRemoved:u,onClickEditList:()=>{ve.showScreenListEdit(r)},onClickDeleteList:async function(){let e=await te.delete();404===e.status&&n("hasBeenRemoved",u=!0),200===e.status&&n("hasBeenRemoved",u=!0),n("feedback",s=e.body.message)},renderItem:{v1:Qt,v2:en,v4:rn}[a],switch_instance_item_binding:function(e,{item:t,each_value:r,item_index:s}){r[s]=e,n("data",c)}}}class pn extends q{constructor(e){super(),W(this,e,fn,mn,a,[])}}function hn(e){var t,n,r,s=new ye({}),o=e.options[e.$renderScreen];if(o)var a=new o({});return{c(){s.$$.fragment.c(),t=p(),a&&a.$$.fragment.c(),n=h()},m(e,o){z(s,e,o),c(e,t,o),a&&z(a,e,o),c(e,n,o),r=!0},p(e,t){if(o!==(o=t.options[t.$renderScreen])){if(a){R();const e=a;P(()=>{e.$destroy()}),e.$$.fragment.o(1),A()}o?((a=new o({})).$$.fragment.c(),a.$$.fragment.i(1),z(a,n.parentNode,n)):a=null}},i(e){r||(s.$$.fragment.i(e),a&&a.$$.fragment.i(e),r=!0)},o(e){s.$$.fragment.o(e),a&&a.$$.fragment.o(e),r=!1},d(e){s.$destroy(e),e&&(u(t),u(n)),a&&a.$destroy(e)}}}function bn(e,t,n){let r;return i(e,re,e=>{n("$renderScreen",r=e)}),{options:{version:Te,options:_e,"labels:by:me":Ve,"label:view":nt,"label:new":ze,"lists:by:me":dt,"alist:new":vt,"alist:edit":qt,"alist:view":pn},$renderScreen:r}}new class extends q{constructor(e){super(),W(this,e,bn,hn,a,[])}}({target:document.body,props:{answer:42}})}();
//# sourceMappingURL=bundle.js.map
