!function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(n)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,n){const r=t.subscribe(n);e.$$.on_destroy.push(r.unsubscribe?()=>r.unsubscribe():r)}function i(e,t){e.appendChild(t)}function c(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function p(){return f(" ")}function h(){return f("")}function v(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function b(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function g(e,t){t=""+t,e.data!==t&&(e.data=t)}function y(e,t,n){e.style.setProperty(t,n)}function w(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}let $;function k(e){$=e}function x(e){(function(){if(!$)throw new Error("Function called outside component initialization");return $})().$$.on_destroy.push(e)}const S=[],_=Promise.resolve();let L=!1;const N=[],C=[],B=[];function I(e){C.push(e)}function E(){const e=new Set;do{for(;S.length;){const e=S.shift();k(e),M(e.$$)}for(;N.length;)N.shift()();for(;C.length;){const t=C.pop();e.has(t)||(t(),e.add(t))}}while(S.length);for(;B.length;)B.pop()();L=!1}function M(e){e.fragment&&(e.update(e.dirty),s(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(I))}let O;function j(){O={remaining:0,callbacks:[]}}function T(){O.remaining||s(O.callbacks)}function D(e){O.callbacks.push(e)}function A(e,n){const r=n.token={};function s(e,s,o,a){if(n.token!==r)return;n.resolved=o&&{[o]:a};const l=t(t({},n.ctx),n.resolved),i=e&&(n.current=e)(l);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==s&&e&&(j(),D(()=>{e.d(1),n.blocks[t]=null}),e.o(1),T())}):n.block.d(1),i.c(),i.i&&i.i(1),i.m(n.mount(),n.anchor),E()),n.block=i,n.blocks&&(n.blocks[s]=i)}if((o=e)&&"function"==typeof o.then){if(e.then(e=>{s(n.then,1,n.value,e)},e=>{s(n.catch,2,n.error,e)}),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var o}function P(e,t){e.d(1),t.delete(e.key)}function R(e,t,n,r,s,o,a,l,i,c,u,d){let m=e.length,f=o.length,p=m;const h={};for(;p--;)h[e[p].key]=p;const v=[],b=new Map,g=new Map;for(p=f;p--;){const e=d(s,o,p),l=n(e);let i=a.get(l);i?r&&i.p(t,e):(i=c(l,e)).c(),b.set(l,v[p]=i),l in h&&g.set(l,Math.abs(p-h[l]))}const y=new Set,w=new Set;function $(e){e.i&&e.i(1),e.m(l,u),a.set(e.key,e),u=e.first,f--}for(;m&&f;){const t=v[f-1],n=e[m-1],r=t.key,s=n.key;t===n?(u=t.first,m--,f--):b.has(s)?!a.has(r)||y.has(r)?$(t):w.has(s)?m--:g.get(r)>g.get(s)?(w.add(r),$(t)):(y.add(s),m--):(i(n,a),m--)}for(;m--;){const t=e[m];b.has(t.key)||i(t,a)}for(;f;)$(v[f-1]);return v}function V(e){let t;return e.subscribe(e=>t=e)(),t}function G(e,t,r){const{fragment:a,on_mount:l,on_destroy:i,after_render:c}=e.$$;a.m(t,r),I(()=>{const t=l.map(n).filter(o);i?i.push(...t):s(t),e.$$.on_mount=[]}),c.forEach(I)}function F(e,t){e.$$.dirty||(S.push(e),L||(L=!0,_.then(E)),e.$$.dirty=r()),e.$$.dirty[t]=!0}function J(t,n,o,a,l,i){const c=$;k(t);const u=n.props||{},d=t.$$={fragment:null,ctx:null,props:i,update:e,not_equal:l,bound:r(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(c?c.$$.context:[]),callbacks:r(),dirty:null};let m=!1;var f;d.ctx=o?o(t,u,(e,n)=>{d.ctx&&l(d.ctx[e],d.ctx[e]=n)&&(d.bound[e]&&d.bound[e](n),m&&F(t,e))}):u,d.update(),m=!0,s(d.before_render),d.fragment=a(d.ctx),n.target&&(n.hydrate?d.fragment.l((f=n.target,Array.from(f.childNodes))):d.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),G(t,n.target,n.anchor),E()),k(c)}class W{$destroy(){var t,n;n=!0,(t=this).$$&&(s(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function z(t,n=e){let r;const s=[];function o(e){if(a(t,e)){if(t=e,!r)return;s.forEach(e=>e[1]()),s.forEach(e=>e[0](t))}}return{set:o,update:function(e){o(e(t))},subscribe:function(a,l=e){const i=[a,l];return s.push(i),1===s.length&&(r=n(o)||e),a(t),()=>{const e=s.indexOf(i);-1!==e&&s.splice(e,1),0===s.length&&r()}}}}let q="options",H={server:"https://learnalist.net/api",headers:{Authorization:"Basic "},renderScreen:q};function U(){return localStorage.getItem("server")}function K(){return{"Content-Type":"application/json",Authorization:"Basic "+localStorage.getItem("basicAuth")}}!function(){let e=localStorage.getItem("basicAuth");if(!e)return void(q="options");H.headers.Authorization="Basic "+e;let t=localStorage.getItem("server");t&&(H.server=t);let n=localStorage.getItem("renderScreen");n&&(H.renderScreen=n)}();let Y={GetVersion:async function(){const e=U()+"/version",t=await fetch(e,{headers:K()}),n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetListsByMe:async function(){const e=U()+"/alist/by/me",t=await fetch(e,{headers:K()});let n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetLabelsByMe:async function(){const e=U()+"/labels/by/me",t=await fetch(e,{headers:K()});let n=await t.json();if(t.ok)return n;throw new Error("Boom")},GetListsByLabel:async function(e){const t=U()+"/alist/by/me?labels="+e,n=await fetch(t,{headers:K()});let r=await n.json();if(n.ok)return r;throw new Error("Boom")},PostList:async function(e){const t=U()+"/alist";let n=e;const r=await fetch(t,{method:"POST",headers:K(),body:JSON.stringify(n)}),s=await r.json();if(400===r.status||201===r.status)return{status:r.status,body:s};throw new Error("Boom")},PutList:async function(e){const t=U()+"/alist/"+e.uuid;let n=e;const r=await fetch(t,{method:"PUT",headers:K(),body:JSON.stringify(n)}),s=await r.json();if(400===r.status||200===r.status)return{status:r.status,body:s};throw new Error("Boom")},DeleteList:async function(e){const t=U()+"/alist/"+e.uuid,n=await fetch(t,{method:"DELETE",headers:K()}),r=await n.json();if(400===n.status||200===n.status||404===n.status)return{status:n.status,body:r};throw new Error("Boom")},DeleteLabel:async function(e){const t=U()+"/labels/"+e,n=await fetch(t,{method:"DELETE",headers:K()}),r=await n.json();if(400===n.status||200===n.status||404===n.status)return{status:n.status,body:r};throw new Error("Boom")},PostLabel:async function(e){const t=U()+"/labels";let n=e;const r=await fetch(t,{method:"POST",headers:K(),body:JSON.stringify(n)}),s=await r.json();if(400===r.status||200===r.status||201===r.status)return{status:r.status,body:s};throw new Error("Boom")}};const Q=function(){const{subscribe:e,set:t,update:n}=z();return{subscribe:e,set:t,create:async function(e,r){let s={data:[],info:{title:e,type:r,labels:[]}};n(e=>s);try{let e=await Y.PostList(s);if(201===e.status){let n=e.body;return t(n),localStorage.setItem("aList",JSON.stringify(n)),e}return e}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to post to the server."}}}},delete:async function(){let e;n(t=>(e=t,t));try{let n=await Y.DeleteList(e);return 200===n.status?(t({}),localStorage.removeItem("aList"),n):n}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to delete from the server."}}}},save:async function(){let e;n(t=>(e=t,t));try{let t=await Y.PutList(e);return 200===t.status?(n(function(e){return t.body}),localStorage.setItem("aList",JSON.stringify(t.body)),"Saved to the server."):t.body.message}catch(e){return console.log(e),"Failed to save to the server."}},setTitle:function(e){n(function(t){return t.info.title=e,t})},addItem:function(e){n(function(t){return t.data.push(e),t})},removeItem:function(e){n(function(t){return t.data.splice(e,1),t})},addLabel:function(e){n(function(t){return t.info.labels.push(e),t})},removeLabel:function(e){n(function(t){return t.info.labels.splice(e,1),t})}}}();const X=function(){const{subscribe:e,set:t,update:n}=z();return{subscribe:e,set:t,delete:async function(){let e;n(t=>(e=t,t));try{let n=await Y.DeleteLabel(e);return 200===n.status?(t(),localStorage.removeItem("label"),n):n}catch(e){return console.log(e),{status:"clientfail",body:{message:"Failed to delete from the server."}}}},save:async function(e){n(t=>e);try{let t=await Y.PostLabel({label:e});return 200===t.status||201===t.status?(n(function(e){return t.body}),localStorage.setItem("label",e),localStorage.setItem("labels",t.body),{status:t.status,body:{message:"Saved to the server."}}):t}catch(e){return console.log(e),"Failed to save to the server."}}}}(),Z=z(H.renderScreen),ee=z();function te(){localStorage.setItem("renderScreen",V(Z))}function ne(){Z.set("version"),te(),ee.set(Y.GetVersion())}function re(){Z.set("labels:by:me"),te(),me(),ee.set(Y.GetLabelsByMe())}function se(){Z.set("label:new"),te()}function oe(e){me(e);Z.set("label:view"),te(),ee.set(Y.GetListsByLabel(e))}function ae(){Z.set("lists:by:me"),te(),ee.set(Y.GetListsByMe()),de({})}function le(e){de(e);let t="alist:view:"+e.info.type;Z.set(t),te()}function ie(e){Q.set(e);let t="alist:edit:"+e.info.type;Z.set(t),te()}function ce(){Z.set("alist:new"),te()}function ue(){Z.set("options"),te()}function de(e){e?localStorage.setItem("aList",JSON.stringify(e)):localStorage.removeItem("aList"),Q.set(e)}function me(e){e?localStorage.setItem("label",e):localStorage.removeItem("label"),X.set(e)}const fe={showScreenLabelsByMe:re,showScreenLabelNew:se,showScreenLabelView:oe,showScreenListsByMe:ae,showScreenListView:le,showScreenListEdit:ie,showScreenListNew:ce,showScreenOptions:ue,showScreenVersion:ne,loadStart:()=>{let e=localStorage.getItem("aList");e?de(e=JSON.parse(e)):H.renderScreen.startsWith("alist:")&&(H.renderScreen="lists:by:me");let t=localStorage.getItem("label");t?me(t):H.renderScreen.startsWith("label:")&&(H.renderScreen="labels:by:me"),"version"===H.renderScreen?ne():"options"===H.renderScreen?ue():"lists:by:me"===H.renderScreen?ae():H.renderScreen.startsWith("alist:view")?le(V(Q)):H.renderScreen.startsWith("alist:edit")?ie(V(Q)):"alist:new"===H.renderScreen?ce():"labels:by:me"===H.renderScreen?re():"label:view"===H.renderScreen?oe(V(X)):"label:new"===H.renderScreen?se():ae()}};function pe(t){var n,r,o,a,l,d,f,h,b,g,y,w,$,k,x,S,_;return{c(){n=m("div"),(r=m("button")).textContent="My Lists",o=p(),(a=m("button")).textContent="My Labels",l=p(),(d=m("span")).textContent="/",f=p(),(h=m("button")).textContent="New List",b=p(),(g=m("button")).textContent="New Label",y=p(),(w=m("span")).textContent="/",$=p(),(k=m("button")).textContent="Options",x=p(),(S=m("button")).textContent="Version",n.className="svelte-py2icl",_=[v(r,"click",fe.showScreenListsByMe),v(a,"click",fe.showScreenLabelsByMe),v(h,"click",fe.showScreenListNew),v(g,"click",fe.showScreenLabelNew),v(k,"click",fe.showScreenOptions),v(S,"click",fe.showScreenVersion)]},m(e,t){c(e,n,t),i(n,r),i(n,o),i(n,a),i(n,l),i(n,d),i(n,f),i(n,h),i(n,b),i(n,g),i(n,y),i(n,w),i(n,$),i(n,k),i(n,x),i(n,S)},p:e,i:e,o:e,d(e){e&&u(n),s(_)}}}fe.loadStart();class he extends W{constructor(e){super(),J(this,e,null,pe,a,[])}}function ve(e){var t,n,r;return{c(){t=m("div"),n=m("h2"),r=f(e.errorMessage),n.className="error svelte-7kos6",t.className="nicebox"},m(e,s){c(e,t,s),i(t,n),i(n,r)},p(e,t){e.errorMessage&&g(r,t.errorMessage)},d(e){e&&u(t)}}}function be(t){var n,r,o,a,l,d,f,h,g,w,$,k,x,S,_,L,N,C,B,I=""!==t.errorMessage&&ve(t);return{c(){I&&I.c(),n=p(),r=m("div"),(o=m("label")).textContent="Server",a=p(),l=m("input"),d=p(),(f=m("label")).textContent="Username",h=p(),g=m("input"),w=p(),($=m("label")).textContent="Password",k=p(),x=m("input"),S=p(),_=m("div"),(L=m("button")).textContent="Save",N=p(),(C=m("button")).textContent="reset / clear / delete",o.htmlFor="f-server",y(l,"width","100%"),b(l,"type","text"),l.name="f-server",l.placeholder="https://learnalist.net/api",f.htmlFor="f-username",y(g,"width","100%"),b(g,"type","text"),g.name="f-username",$.htmlFor="f-password",y(x,"width","100%"),b(x,"type","password"),x.name="f-password",r.className="nicebox",_.className="nicebox",B=[v(l,"input",t.input0_input_handler),v(g,"input",t.input1_input_handler),v(x,"input",t.input2_input_handler),v(L,"click",t.save),v(C,"click",ge)]},m(e,s){I&&I.m(e,s),c(e,n,s),c(e,r,s),i(r,o),i(r,a),i(r,l),l.value=t.options.server,i(r,d),i(r,f),i(r,h),i(r,g),g.value=t.options.username,i(r,w),i(r,$),i(r,k),i(r,x),x.value=t.options.password,c(e,S,s),c(e,_,s),i(_,L),i(_,N),i(_,C)},p(e,t){""!==t.errorMessage?I?I.p(e,t):((I=ve(t)).c(),I.m(n.parentNode,n)):I&&(I.d(1),I=null),e.options&&l.value!==t.options.server&&(l.value=t.options.server),e.options&&g.value!==t.options.username&&(g.value=t.options.username),e.options&&(x.value=t.options.password)},i:e,o:e,d(e){I&&I.d(e),e&&(u(n),u(r),u(S),u(_)),s(B)}}}function ge(){console.log("reset")}function ye(e,t,n){let r="",s={server:localStorage.getItem("server")?localStorage.getItem("server"):"",username:localStorage.getItem("username")?localStorage.getItem("username"):"",password:""};return{errorMessage:r,options:s,save:function(){if(n("errorMessage",r=""),""!==s.server&&console.log("Should we ping the /version?"),""===s.username||""===s.password)return n("errorMessage",r="You need to set a username and password"),console.log(r),localStorage.setItem("username",""),localStorage.setItem("basicAuth",""),!1;{let e=btoa(s.username+":"+s.password);localStorage.setItem("username",s.username),localStorage.setItem("basicAuth",e)}localStorage.setItem("server",s.server),fe.showScreenListsByMe()},input0_input_handler:function(){s.server=this.value,n("options",s)},input1_input_handler:function(){s.username=this.value,n("options",s)},input2_input_handler:function(){s.password=this.value,n("options",s)}}}class we extends W{constructor(e){super(),J(this,e,ye,be,a,[])}}function $e(e){var n,r;let s={ctx:e,current:null,pending:Se,then:xe,catch:ke,value:"data",error:"error"};return A(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&A(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function ke(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),i(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function xe(e){var t,n,r,s,o,a,l,d,h,v,b,y=e.data.version,w=e.data.gitHash,$=e.data.gitDate;return{c(){t=m("p"),n=f("Version is "),r=f(y),s=p(),o=m("p"),a=f("Git hash is "),l=f(w),d=p(),h=m("p"),v=f("Git date is "),b=f($)},m(e,u){c(e,t,u),i(t,n),i(t,r),c(e,s,u),c(e,o,u),i(o,a),i(o,l),c(e,d,u),c(e,h,u),i(h,v),i(h,b)},p(e,t){e.$promise&&y!==(y=t.data.version)&&g(r,y),e.$promise&&w!==(w=t.data.gitHash)&&g(l,w),e.$promise&&$!==($=t.data.gitDate)&&g(b,$)},d(e){e&&(u(t),u(s),u(o),u(d),u(h))}}}function Se(t){var n;return{c(){(n=m("p")).textContent="...waiting"},m(e,t){c(e,n,t)},p:e,d(e){e&&u(n)}}}function _e(t){var n,r=t.$promise&&$e(t);return{c(){n=m("div"),r&&r.c(),n.className="nicebox"},m(e,t){c(e,n,t),r&&r.m(n,null)},p(e,t){t.$promise?r?r.p(e,t):((r=$e(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&u(n),r&&r.d()}}}function Le(e,t,n){let r;return l(e,ee,e=>{n("$promise",r=e)}),{$promise:r}}class Ne extends W{constructor(e){super(),J(this,e,Le,_e,a,[])}}function Ce(e,t,n){const r=Object.create(e);return r.label=t[n],r}function Be(e){var n,r;let s={ctx:e,current:null,pending:Oe,then:Ee,catch:Ie,value:"labels",error:"error"};return A(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&A(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function Ie(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),i(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function Ee(e){for(var t,n=e.labels,r=[],s=0;s<n.length;s+=1)r[s]=Me(Ce(e,n,s));return{c(){t=m("ul");for(var e=0;e<r.length;e+=1)r[e].c()},m(e,n){c(e,t,n);for(var s=0;s<r.length;s+=1)r[s].m(t,null)},p(e,s){if(e.onClick||e.$promise){n=s.labels;for(var o=0;o<n.length;o+=1){const a=Ce(s,n,o);r[o]?r[o].p(e,a):(r[o]=Me(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){e&&u(t),d(r,e)}}}function Me(e){var t,n,r,s,o,a=e.label;return{c(){t=m("li"),n=m("span"),r=f(a),s=p(),o=v(n,"click",e.onClick(e.label))},m(e,o){c(e,t,o),i(t,n),i(n,r),i(t,s)},p(t,n){e=n,t.$promise&&a!==(a=e.label)&&g(r,a)},d(e){e&&u(t),o()}}}function Oe(t){var n;return{c(){(n=m("p")).textContent="...waiting"},m(e,t){c(e,n,t)},p:e,d(e){e&&u(n)}}}function je(t){var n,r=t.$promise&&Be(t);return{c(){n=m("div"),r&&r.c(),n.className="nicebox"},m(e,t){c(e,n,t),r&&r.m(n,null)},p(e,t){t.$promise?r?r.p(e,t):((r=Be(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&u(n),r&&r.d()}}}function Te(e,t,n){let r;l(e,ee,e=>{n("$promise",r=e)});return{onClick:e=>()=>{fe.showScreenLabelView(e)},$promise:r}}class De extends W{constructor(e){super(),J(this,e,Te,je,a,[])}}function Ae(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.message),t.title="Click to dismiss.",o=v(t,"click",e.click_handler)},m(e,o){c(e,t,o),i(t,n),i(n,r),i(n,s)},p(e,t){e.message&&g(s,t.message)},d(e){e&&u(t),o()}}}function Pe(t){var n,r,o,a,l,d,f,h,g=t.message&&Ae(t);return{c(){g&&g.c(),n=p(),r=m("div"),(o=m("p")).textContent="Add a label",a=p(),l=m("input"),d=p(),(f=m("button")).textContent="Add",b(l,"type","text"),r.className="nicebox",h=[v(l,"input",t.input_input_handler),v(f,"click",t.add)]},m(e,s){g&&g.m(e,s),c(e,n,s),c(e,r,s),i(r,o),i(r,a),i(r,l),l.value=t.newLabel,i(r,d),i(r,f)},p(e,t){t.message?g?g.p(e,t):((g=Ae(t)).c(),g.m(n.parentNode,n)):g&&(g.d(1),g=null),e.newLabel&&l.value!==t.newLabel&&(l.value=t.newLabel)},i:e,o:e,d(e){g&&g.d(e),e&&(u(n),u(r)),s(h)}}}function Re(e,t,n){let r,s="";function o(){n("message",r=null)}return{newLabel:s,message:r,clearMessage:o,add:async function(){if(""===s||s.indexOf(" ")>=0)return n("message",r="The label cannot be empty."),void n("newLabel",s="");let e=await X.save(s);201===e.status||200===e.status?(n("message",r=e.body.message),fe.showScreenLabelView(s)):n("message",r=e.body.message)},click_handler:function(){return o()},input_input_handler:function(){s=this.value,n("newLabel",s)}}}class Ve extends W{constructor(e){super(),J(this,e,Re,Pe,a,[])}}function Ge(e,t,n){const r=Object.create(e);return r.aList=t[n],r}function Fe(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.message),t.className="nicebox",t.title="Click to dismiss.",o=v(t,"click",e.click_handler)},m(e,o){c(e,t,o),i(t,n),i(n,r),i(n,s)},p(e,t){e.message&&g(s,t.message)},d(e){e&&u(t),o()}}}function Je(e){var t,n,r,s,o,a=e.$promise&&We(e);return{c(){t=m("div"),(n=m("button")).textContent="Delete label",r=p(),s=m("div"),a&&a.c(),t.className="nicebox",s.className="nicebox",o=v(n,"click",e.deleteLabel)},m(e,o){c(e,t,o),i(t,n),c(e,r,o),c(e,s,o),a&&a.m(s,null)},p(e,t){t.$promise?a?a.p(e,t):((a=We(t)).c(),a.m(s,null)):a&&(a.d(1),a=null)},d(e){e&&(u(t),u(r),u(s)),a&&a.d(),o()}}}function We(e){var n,r;let s={ctx:e,current:null,pending:Ue,then:qe,catch:ze,value:"lists",error:"error"};return A(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&A(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function ze(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),i(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function qe(e){var t,n,r,s,o,a,l=[],d=new Map,h=e.lists;const v=e=>e.aList;for(var b=0;b<h.length;b+=1){let t=Ge(e,h,b),n=v(t);d.set(n,l[b]=He(n,t))}return{c(){for(t=m("p"),n=f("Lists with the label "),r=f(e.current),s=f("."),o=p(),a=m("ul"),b=0;b<l.length;b+=1)l[b].c()},m(e,u){for(c(e,t,u),i(t,n),i(t,r),i(t,s),c(e,o,u),c(e,a,u),b=0;b<l.length;b+=1)l[b].m(a,null)},p(e,t){e.current&&g(r,t.current);const n=t.lists;l=R(l,e,v,1,t,n,d,a,P,He,null,Ge)},d(e){for(e&&(u(t),u(o),u(a)),b=0;b<l.length;b+=1)l[b].d()}}}function He(e,t){var n,r,s,o,a=t.aList.info.title;return{key:e,first:null,c(){n=m("li"),r=m("span"),s=f(a),o=p(),this.first=n},m(e,t){c(e,n,t),i(n,r),i(r,s),i(n,o)},p(e,t){e.$promise&&a!==(a=t.aList.info.title)&&g(s,a)},d(e){e&&u(n)}}}function Ue(e){var t,n,r,s;return{c(){t=m("p"),n=f("Looking for lists with the label "),r=f(e.current),s=f(".")},m(e,o){c(e,t,o),i(t,n),i(t,r),i(t,s)},p(e,t){e.current&&g(r,t.current)},d(e){e&&u(t)}}}function Ke(t){var n,r,s=t.message&&Fe(t),o=!t.hasBeenRemoved&&Je(t);return{c(){s&&s.c(),n=p(),o&&o.c(),r=h()},m(e,t){s&&s.m(e,t),c(e,n,t),o&&o.m(e,t),c(e,r,t)},p(e,t){t.message?s?s.p(e,t):((s=Fe(t)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t.hasBeenRemoved?o&&(o.d(1),o=null):o?o.p(e,t):((o=Je(t)).c(),o.m(r.parentNode,r))},i:e,o:e,d(e){s&&s.d(e),e&&u(n),o&&o.d(e),e&&u(r)}}}function Ye(e,t,n){let r,s;l(e,ee,e=>{n("$promise",r=e)});let o,a=!1;function i(){n("message",s=null)}return x(X.subscribe(e=>{n("current",o=e)})),{message:s,hasBeenRemoved:a,current:o,clearMessage:i,deleteLabel:async function(){let e=await X.delete();404===e.status&&n("hasBeenRemoved",a=!0),200===e.status&&n("hasBeenRemoved",a=!0),n("message",s=e.body.message)},$promise:r,click_handler:function(){return i()}}}class Qe extends W{constructor(e){super(),J(this,e,Ye,Ke,a,[])}}function Xe(e,t,n){const r=Object.create(e);return r.aList=t[n],r}function Ze(e){var n,r;let s={ctx:e,current:null,pending:rt,then:tt,catch:et,value:"lists",error:"error"};return A(r=e.$promise,s),{c(){n=h(),s.block.c()},m(e,t){c(e,n,t),s.block.m(e,s.anchor=t),s.mount=(()=>n.parentNode),s.anchor=n},p(n,o){e=o,s.ctx=e,"$promise"in n&&r!==(r=e.$promise)&&A(r,s)||s.block.p(n,t(t({},e),s.resolved))},d(e){e&&u(n),s.block.d(e),s=null}}}function et(e){var t,n,r=e.error.message;return{c(){t=m("p"),n=f(r),y(t,"color","red")},m(e,r){c(e,t,r),i(t,n)},p(e,t){e.$promise&&r!==(r=t.error.message)&&g(n,r)},d(e){e&&u(t)}}}function tt(e){var t,n=[],r=new Map,s=e.lists;const o=e=>e.aList;for(var a=0;a<s.length;a+=1){let t=Xe(e,s,a),l=o(t);r.set(l,n[a]=nt(l,t))}return{c(){for(t=m("ul"),a=0;a<n.length;a+=1)n[a].c()},m(e,r){for(c(e,t,r),a=0;a<n.length;a+=1)n[a].m(t,null)},p(e,s){const a=s.lists;n=R(n,e,o,1,s,a,r,t,P,nt,null,Xe)},d(e){for(e&&u(t),a=0;a<n.length;a+=1)n[a].d()}}}function nt(e,t){var n,r,s,o,a,l,d=t.aList.info.title;return{key:e,first:null,c(){n=m("li"),r=m("span"),s=f(d),o=f(" ."),a=p(),l=v(r,"click",t.onClick(t.aList)),this.first=n},m(e,t){c(e,n,t),i(n,r),i(r,s),i(r,o),i(n,a)},p(e,n){t=n,e.$promise&&d!==(d=t.aList.info.title)&&g(s,d)},d(e){e&&u(n),l()}}}function rt(t){var n;return{c(){(n=m("p")).textContent="...waiting"},m(e,t){c(e,n,t)},p:e,d(e){e&&u(n)}}}function st(t){var n,r=t.$promise&&Ze(t);return{c(){n=m("div"),r&&r.c(),n.className="nicebox"},m(e,t){c(e,n,t),r&&r.m(n,null)},p(e,t){t.$promise?r?r.p(e,t):((r=Ze(t)).c(),r.m(n,null)):r&&(r.d(1),r=null)},i:e,o:e,d(e){e&&u(n),r&&r.d()}}}function ot(e,t,n){let r;l(e,ee,e=>{n("$promise",r=e)});return{onClick:e=>()=>{fe.showScreenListView(e)},$promise:r}}class at extends W{constructor(e){super(),J(this,e,ot,st,a,[])}}function lt(e,t,n){const r=Object.create(e);return r.listType=t[n],r}function it(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.message),t.title="Click to dismiss.",o=v(t,"click",e.click_handler)},m(e,o){c(e,t,o),i(t,n),i(n,r),i(n,s)},p(e,t){e.message&&g(s,t.message)},d(e){e&&u(t),o()}}}function ct(e){var t,n,r=e.listType;return{c(){t=m("option"),n=f(r),t.__value=e.listType,t.value=t.__value},m(e,r){c(e,t,r),i(t,n)},p(e,n){t.value=t.__value},d(e){e&&u(t)}}}function ut(t){for(var n,r,o,a,l,f,h,g,y,$,k,x,S,_,L,N,C,B=t.message&&it(t),E=t.listTypes,M=[],O=0;O<E.length;O+=1)M[O]=ct(lt(t,E,O));return{c(){B&&B.c(),n=p(),r=m("div"),(o=m("span")).textContent="Add",a=p(),l=m("form"),f=m("input"),h=p(),g=m("br"),y=p(),($=m("span")).textContent="Which list type?",k=p(),x=m("br"),S=p(),_=m("select");for(var e=0;e<M.length;e+=1)M[e].c();var s;L=p(),(N=m("button")).textContent="Submit",b(f,"type","text"),f.placeholder="Title",void 0===t.selected&&I(()=>t.select_change_handler.call(_)),N.type="submit",r.className="nicebox",C=[v(f,"input",t.input_input_handler),v(_,"change",t.select_change_handler),v(l,"submit",(s=t.handleSubmit,function(e){return e.preventDefault(),s.call(this,e)}))]},m(e,s){B&&B.m(e,s),c(e,n,s),c(e,r,s),i(r,o),i(r,a),i(r,l),i(l,f),f.value=t.title,i(l,h),i(l,g),i(l,y),i(l,$),i(l,k),i(l,x),i(l,S),i(l,_);for(var u=0;u<M.length;u+=1)M[u].m(_,null);w(_,t.selected),i(l,L),i(l,N)},p(e,t){if(t.message?B?B.p(e,t):((B=it(t)).c(),B.m(n.parentNode,n)):B&&(B.d(1),B=null),e.title&&f.value!==t.title&&(f.value=t.title),e.listTypes){E=t.listTypes;for(var r=0;r<E.length;r+=1){const n=lt(t,E,r);M[r]?M[r].p(e,n):(M[r]=ct(n),M[r].c(),M[r].m(_,null))}for(;r<M.length;r+=1)M[r].d(1);M.length=E.length}e.selected&&w(_,t.selected)},i:e,o:e,d(e){B&&B.d(e),e&&(u(n),u(r)),d(M,e),s(C)}}}function dt(e,t,n){let r,s,o="",a=["v1","v2"];function l(){n("message",s=null)}return{title:o,listTypes:a,selected:r,message:s,clearMessage:l,handleSubmit:async function(){if(""==o)return void n("message",s="Title cant be empty.");let e=await Q.create(o,r);201===e.status?fe.showScreenListEdit(e.body):n("message",s=e.body.message)},click_handler:function(){return l()},input_input_handler:function(){o=this.value,n("title",o)},select_change_handler:function(){r=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n("selected",r),n("listTypes",a)}}}class mt extends W{constructor(e){super(),J(this,e,dt,ut,a,[])}}function ft(e,t,n){const r=Object.create(e);return r.item=t[n],r.each_value=t,r.i=n,r}function pt(e,t,n){const r=Object.create(e);return r.item=t[n],r.each_value_1=t,r.i=n,r}function ht(e){var t,n,r,s,o;return{c(){t=m("div"),n=m("span"),r=f("message: "),s=f(e.message),t.title="Click to dismiss.",t.className="svelte-py2icl",o=v(t,"click",e.click_handler)},m(e,o){c(e,t,o),i(t,n),i(n,r),i(n,s)},p(e,t){e.message&&g(s,t.message)},d(e){e&&u(t),o()}}}function vt(e){var t,n,r,o,a,l,d,f,h,g,y,w,$,k,x,S,_,L=e.labels&&e.labels.length>0&&bt(e),N=e.data.length>0&&yt(e);return{c(){t=m("div"),(n=m("span")).textContent="Title:",r=p(),o=m("input"),a=p(),l=m("div"),(d=m("button")).textContent="+ item",f=p(),(h=m("button")).textContent="+ label",g=p(),L&&L.c(),y=p(),N&&N.c(),w=p(),$=m("div"),(k=m("button")).textContent="save",x=p(),(S=m("button")).textContent="Delete",b(o,"type","text"),o.value=e.title,t.className="svelte-py2icl",l.className="svelte-py2icl",$.className="svelte-py2icl",_=[v(o,"keyup",kt),v(d,"click",xt),v(h,"click",St),v(k,"click",e.save),v(S,"click",e.deleteList)]},m(e,s){c(e,t,s),i(t,n),i(t,r),i(t,o),c(e,a,s),c(e,l,s),i(l,d),i(l,f),i(l,h),c(e,g,s),L&&L.m(e,s),c(e,y,s),N&&N.m(e,s),c(e,w,s),c(e,$,s),i($,k),i($,x),i($,S)},p(e,t){e.title&&(o.value=t.title),t.labels&&t.labels.length>0?L?L.p(e,t):((L=bt(t)).c(),L.m(y.parentNode,y)):L&&(L.d(1),L=null),t.data.length>0?N?N.p(e,t):((N=yt(t)).c(),N.m(w.parentNode,w)):N&&(N.d(1),N=null)},d(e){e&&(u(t),u(a),u(l),u(g)),L&&L.d(e),e&&u(y),N&&N.d(e),e&&(u(w),u($)),s(_)}}}function bt(e){for(var t,n,r=e.labels,s=[],o=0;o<r.length;o+=1)s[o]=gt(pt(e,r,o));return{c(){t=m("div"),n=m("ul");for(var e=0;e<s.length;e+=1)s[e].c();t.className="svelte-py2icl"},m(e,r){c(e,t,r),i(t,n);for(var o=0;o<s.length;o+=1)s[o].m(n,null)},p(e,t){if(e.labels||e.handleKeyDown){r=t.labels;for(var o=0;o<r.length;o+=1){const a=pt(t,r,o);s[o]?s[o].p(e,a):(s[o]=gt(a),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(e){e&&u(t),d(s,e)}}}function gt(e){var t,n,r,o,a;function l(){e.input_input_handler.call(n,e)}function d(){return e.click_handler_1(e)}return{c(){t=m("li"),n=m("input"),r=p(),(o=m("span")).textContent="x",b(n,"type","text"),a=[v(n,"input",l),v(n,"keydown",_t),v(o,"click",d)]},m(s,a){c(s,t,a),i(t,n),n.value=e.item,i(t,r),i(t,o)},p(t,r){e=r,t.labels&&n.value!==e.item&&(n.value=e.item)},d(e){e&&u(t),s(a)}}}function yt(e){for(var t,n,r,s,o=e.data,a=[],l=0;l<o.length;l+=1)a[l]=wt(ft(e,o,l));return{c(){t=m("div"),(n=m("p")).textContent="Data",r=p(),s=m("ul");for(var e=0;e<a.length;e+=1)a[e].c();t.className="svelte-py2icl"},m(e,o){c(e,t,o),i(t,n),i(t,r),i(t,s);for(var l=0;l<a.length;l+=1)a[l].m(s,null)},p(e,t){if(e.data){o=t.data;for(var n=0;n<o.length;n+=1){const r=ft(t,o,n);a[n]?a[n].p(e,r):(a[n]=wt(r),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},d(e){e&&u(t),d(a,e)}}}function wt(e){var t,n,r,o,a;function l(){e.input_input_handler_1.call(n,e)}function d(){return e.click_handler_2(e)}return{c(){t=m("li"),n=m("input"),r=p(),(o=m("span")).textContent="x",b(n,"type","text"),a=[v(n,"input",l),v(o,"click",d)]},m(s,a){c(s,t,a),i(t,n),n.value=e.item,i(t,r),i(t,o)},p(t,r){e=r,t.data&&n.value!==e.item&&(n.value=e.item)},d(e){e&&u(t),s(a)}}}function $t(t){var n,r,s=t.message&&ht(t),o=!t.hasBeenRemoved&&vt(t);return{c(){s&&s.c(),n=p(),o&&o.c(),r=h()},m(e,t){s&&s.m(e,t),c(e,n,t),o&&o.m(e,t),c(e,r,t)},p(e,t){t.message?s?s.p(e,t):((s=ht(t)).c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t.hasBeenRemoved?o&&(o.d(1),o=null):o?o.p(e,t):((o=vt(t)).c(),o.m(r.parentNode,r))},i:e,o:e,d(e){s&&s.d(e),e&&u(n),o&&o.d(e),e&&u(r)}}}function kt(e){Q.setTitle(e.target.value)}function xt(){Q.addItem("")}function St(){Q.addLabel("")}function _t(e){13!==e.keyCode||St()}function Lt(e,t,n){let r,s,o=[],a=[],l=!1;function i(){n("message",r=null)}return x(Q.subscribe(e=>{if(function(e){return 0===Object.entries(e).length&&e.constructor===Object}(e))return n("title",s=void 0),n("labels",o=void 0),n("data",a=void 0),void n("hasBeenRemoved",l=!0);n("title",s=e.info.title),n("labels",o=e.info.labels),n("data",a=e.data)})),{message:r,title:s,labels:o,data:a,hasBeenRemoved:l,clearMessage:i,save:async function(){n("message",r=await Q.save())},deleteList:async function(){let e=await Q.delete();404===e.status&&n("hasBeenRemoved",l=!0),200===e.status&&n("hasBeenRemoved",l=!0),n("message",r=e.body.message)},click_handler:function(){return i()},input_input_handler:function({item:e,each_value_1:t,i:r}){t[r]=this.value,n("labels",o)},click_handler_1:function({i:e}){return t=e,void Q.removeLabel(t);var t},input_input_handler_1:function({item:e,each_value:t,i:r}){t[r]=this.value,n("data",a)},click_handler_2:function({i:e}){return t=e,void Q.removeItem(t);var t}}}class Nt extends W{constructor(e){super(),J(this,e,Lt,$t,a,[])}}function Ct(t){var n;return{c(){(n=m("p")).textContent="List edit v2"},m(e,t){c(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}class Bt extends W{constructor(e){super(),J(this,e,null,Ct,a,[])}}function It(e,t,n){const r=Object.create(e);return r.item=t[n],r}function Et(e,t,n){const r=Object.create(e);return r.item=t[n],r}function Mt(e){for(var t,n,r,s,o=e.labels,a=[],l=0;l<o.length;l+=1)a[l]=Ot(Et(e,o,l));return{c(){t=m("div"),(n=m("p")).textContent="Labels",r=p(),s=m("ul");for(var e=0;e<a.length;e+=1)a[e].c();t.className="nicebox svelte-py2icl"},m(e,o){c(e,t,o),i(t,n),i(t,r),i(t,s);for(var l=0;l<a.length;l+=1)a[l].m(s,null)},p(e,t){if(e.labels){o=t.labels;for(var n=0;n<o.length;n+=1){const r=Et(t,o,n);a[n]?a[n].p(e,r):(a[n]=Ot(r),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},d(e){e&&u(t),d(a,e)}}}function Ot(e){var t,n,r,s=e.item;return{c(){t=m("li"),n=m("span"),r=f(s)},m(e,s){c(e,t,s),i(t,n),i(n,r)},p(e,t){e.labels&&s!==(s=t.item)&&g(r,s)},d(e){e&&u(t)}}}function jt(e){for(var t,n,r,s,o=e.data,a=[],l=0;l<o.length;l+=1)a[l]=Tt(It(e,o,l));return{c(){t=m("div"),(n=m("p")).textContent="Data",r=p(),s=m("ul");for(var e=0;e<a.length;e+=1)a[e].c();t.className="nicebox svelte-py2icl"},m(e,o){c(e,t,o),i(t,n),i(t,r),i(t,s);for(var l=0;l<a.length;l+=1)a[l].m(s,null)},p(e,t){if(e.data){o=t.data;for(var n=0;n<o.length;n+=1){const r=It(t,o,n);a[n]?a[n].p(e,r):(a[n]=Tt(r),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}},d(e){e&&u(t),d(a,e)}}}function Tt(e){var t,n,r,s,o=e.item;return{c(){t=m("li"),n=m("span"),r=f(o),s=p()},m(e,o){c(e,t,o),i(t,n),i(n,r),i(t,s)},p(e,t){e.data&&o!==(o=t.item)&&g(r,o)},d(e){e&&u(t)}}}function Dt(t){var n,r,s,o,a,l,d,b,y,w,$=t.labels.length>0&&Mt(t),k=t.data.length>0&&jt(t);return{c(){n=m("div"),(r=m("button")).textContent="Edit list",s=p(),o=m("div"),a=m("h1"),l=f(t.title),d=p(),$&&$.c(),b=p(),k&&k.c(),y=h(),n.className="svelte-py2icl",o.className="nicebox svelte-py2icl",w=v(r,"click",t.onClick)},m(e,t){c(e,n,t),i(n,r),c(e,s,t),c(e,o,t),i(o,a),i(a,l),c(e,d,t),$&&$.m(e,t),c(e,b,t),k&&k.m(e,t),c(e,y,t)},p(e,t){e.title&&g(l,t.title),t.labels.length>0?$?$.p(e,t):(($=Mt(t)).c(),$.m(b.parentNode,b)):$&&($.d(1),$=null),t.data.length>0?k?k.p(e,t):((k=jt(t)).c(),k.m(y.parentNode,y)):k&&(k.d(1),k=null)},i:e,o:e,d(e){e&&(u(n),u(s),u(o),u(d)),$&&$.d(e),e&&u(b),k&&k.d(e),e&&u(y),w()}}}function At(e,t,n){let r,s;l(e,Q,e=>{n("$aList",r=e)});let o=[],a=[];x(Q.subscribe(e=>{n("title",s=r.info.title),n("labels",o=r.info.labels),n("data",a=r.data)}));return{title:s,labels:o,data:a,onClick:()=>{fe.showScreenListEdit(r)}}}class Pt extends W{constructor(e){super(),J(this,e,At,Dt,a,[])}}function Rt(t){var n;return{c(){(n=m("p")).textContent="I am list view 2."},m(e,t){c(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}class Vt extends W{constructor(e){super(),J(this,e,null,Rt,a,[])}}function Gt(e){var t,n,r,s=new he({}),o=e.options[e.$renderScreen];if(o)var a=new o({});return{c(){s.$$.fragment.c(),t=p(),a&&a.$$.fragment.c(),n=h()},m(e,o){G(s,e,o),c(e,t,o),a&&G(a,e,o),c(e,n,o),r=!0},p(e,t){if(o!==(o=t.options[t.$renderScreen])){if(a){j();const e=a;D(()=>{e.$destroy()}),e.$$.fragment.o(1),T()}o?((a=new o({})).$$.fragment.c(),a.$$.fragment.i(1),G(a,n.parentNode,n)):a=null}},i(e){r||(s.$$.fragment.i(e),a&&a.$$.fragment.i(e),r=!0)},o(e){s.$$.fragment.o(e),a&&a.$$.fragment.o(e),r=!1},d(e){s.$destroy(e),e&&(u(t),u(n)),a&&a.$destroy(e)}}}function Ft(e,t,n){let r;return l(e,Z,e=>{n("$renderScreen",r=e)}),{options:{version:Ne,options:we,"labels:by:me":De,"label:view":Qe,"label:new":Ve,"lists:by:me":at,"alist:new":mt,"alist:edit:v1":Nt,"alist:edit:v2":Bt,"alist:view:v1":Pt,"alist:view:v2":Vt},$renderScreen:r}}new class extends W{constructor(e){super(),J(this,e,Ft,Gt,a,[])}}({target:document.body,props:{answer:42}})}();
//# sourceMappingURL=bundle.js.map
